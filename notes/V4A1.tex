\documentclass{article}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{enumerate}
\usepackage{bbm}
\usepackage{lipsum}
\usepackage{fancyhdr}
\usepackage{tikz-cd} 

\newtheorem{theorem}{Theorem}[section] 
\newtheorem{proposition}{Proposition}[section] 
\newtheorem{definition}{Definition}[section] 
\newtheorem{lemma}{Lemma}[section] 
\newtheorem{notation}{Notation}[section] 
\newtheorem{remark}{Remark}[section] 
\newtheorem{corollary}{Corollary}[section] 
\newtheorem{terminology}{Terminology}[section] 
\newtheorem{example}{Example}[section] 
\numberwithin{equation}{section}

\DeclareMathOperator{\diam}{diam}
\DeclareMathOperator{\Gal}{Gal}
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\Dom}{Dom}
\DeclareMathOperator{\Ann}{Ann}
\DeclareMathOperator{\grad}{grad}
\DeclareMathOperator{\Span}{Span}
\DeclareMathOperator{\interior}{int}
\DeclareMathOperator{\ind}{ind}
\DeclareMathOperator{\supp}{supp}
\DeclareMathOperator{\ob}{ob}
\DeclareMathOperator{\Spec}{Spec}
\DeclareMathOperator{\MaxSpec}{MaxSpec}
\DeclareMathOperator{\PreSh}{PreSh}
\DeclareMathOperator{\Sh}{Sh}
\DeclareMathOperator{\Fun}{Fun}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\Ker}{Ker}
\DeclareMathOperator{\Image}{Im}
\DeclareMathOperator{\Coker}{Coker}
%\newcommand*{\name}[\num_arguments][default values]{{\color{#1}\Large #2}}
\newcommand*{\multivar}[2]{{#1_1,\cdots,#1_{#2}}}
\newcommand*{\localization}[2]{#1_{\mathfrak{#2}}}
\newcommand*{\ringedspacemorph}[1]{(#1,#1^{\#})}
\newcommand*{\sheaf}[2]{(#1,{\mathcal{#2}}_{#1})}
\newcommand{\fib}[1]{%
  \mathbin{\mathop{\times}\limits_{#1}}%
}

\title{Algebraic Geometry 1}
\author{So Murata}
\date{2024/2025 Winter Semester - Uni Bonn}

\begin{document}
\maketitle

\section{Topology}

\subsection{Connected Sets}

\begin{definition}
Let $(X,\mathcal{T})$ be a topological space. A subset $A$ of $X$ is said to be connected if for any $U,V\in\mathcal{T}$, $U\cap V=\empty, U\cup V\supset A$ then $A$ is fully contained in one of $U,V$. 
\end{definition}

\begin{definition}
A connected component of a topological space is a maximal connected subset of a space. 
\end{definition}

\begin{proposition}
Let $(X,\mathcal{T}_X),(Y,\mathcal{T}_Y)$ be topological space and $f:X\to Y$ be a continuous function. Then for any connected subset $A$ of $X$, $f(A)$ is connected in $Y$. 
\end{proposition}

\begin{proof}
\begin{align*}
U,V\in\mathcal{T}_Y, U\cup V\supset f(A), U\cap V=\emptyset, \\
 \Rightarrow &f^{-1}(U),f^{-1}(V)\in\mathcal{T}_X,\\
& f^{-1}(U)\cup f^{-1}(V)\supset A, \\
&f^{-1}(U)\cap f^{-1}(V)=\emptyset,\\
 \Rightarrow& f^{-1}(U)\supset A\lor f^{-1}(V)\supset A,\\
 \Rightarrow& U\supset f(A) \lor V\supset f(A).
\end{align*}
\end{proof}

\begin{definition}
Let $X$ be a topological space. A point $\eta\in X$ is called a generic point if 
\begin{equation*}
\overline{\{\eta\}} = X.
\end{equation*}
\end{definition}


\section{Category Theory}

\subsection{Categories}

\begin{definition}
A category $\mathcal{A}$ consists of
\begin{enumerate}[\textbullet]
\item a collection $\ob(\mathcal{A})$ of objects;
\item for each $A,B\in\ob(\mathcal{A})$, a collection $\mathcal{A}(A,B)$ of morphisms from $A$ to $B$;
\end{enumerate}
such that 
\begin{enumerate}[i).]
\item for each $A\in\ob(\mathcal{A})$, the identity $1_A\in\mathcal{A}(A,A)$;
\item the composition $\mathcal{A}(B,C)\times\mathcal{A}(A,B)\ni(g,f)\mapsto g\circ f\in\mathcal{A}(A,C)$ is well-defined;
\end{enumerate}
and they satisfy the following axioms
\begin{enumerate}[I).]
\item Associativity : $f\in\mathcal{A}(A,B),g\in\mathcal{A}(B,C),h\in\mathcal{A}(C,D)$, $(h\circ g)\circ f = h\circ (g\circ f)$.
\item Identity laws : $f\in\mathcal{A}(A,B)$ then $f\circ 1_A = 1_B\circ f$.
\end{enumerate}
\end{definition}

\begin{definition}
Let $\mathcal{A}$ be a category. A terminal object $T\in\ob(\mathcal{A})$ is an object such that for any $A\in\ob(\mathcal{A})$, $\mathcal{A}(A,T)$ is a single element set.
\end{definition}

\begin{definition}
Given two categories $\mathcal{A},\mathcal{B}$, we say $\mathcal{A}$ is a full-subcategory of $\mathcal{B}$ if 
\begin{enumerate}[i).]
\item $\mathcal{A}\subset\mathcal{B}$,
\item $\ob(\mathcal{A})=\ob(\mathcal{B})$.
\end{enumerate}
\end{definition}

\begin{notation}
Here we give notations to some important categories.
\begin{enumerate}[\textbullet]
\item $(\mathbf{Sets})$ : A category of sets equipped with set theoretic functions.
\item $(\mathbf{Ab})$ : A category of abelian groups with group homomorphisms.
\end{enumerate}
\end{notation}

\begin{example}
\label{order_category}
Given a partially ordered set $(X,\leq)$. This can be encoded to a category $\mathcal{O}$ by
\begin{enumerate}[i).]
\item $\ob(\mathcal{O}) = X$,
\item For $x,y\in X$, $x\leq y\Rightarrow\mathcal{O}(x,y) = \{*\}$ otherwise the morphisms between $x,y$ is an emptyset.
\end{enumerate}
\end{example}

\begin{definition}
A opposite/dual category of a category $\mathcal{A}$ is $\mathcal{A}^{\textbf{op}}$ such that
\begin{enumerate}[i).]
\item $\ob(\mathcal{A}^{\textbf{op}})=\ob(\mathcal{A})$,
\item $\mathcal{A}^{\textbf{op}}(B,A) = \mathcal{A}(A,B)$.
\end{enumerate}
\end{definition}

\begin{definition}
Let $\mathcal{A}$ be a category and $\varphi_1,\varphi_2\in\mathcal{A}(M,N)$. A morphism $\varphi:K\to M$ is called an equalizer of $(\varphi_1,\varphi_2)$ if for any morphism $\psi:P\to M$ such that
$\varphi_1\circ\psi=\varphi_2\circ\psi$, there is a unique morphism $\tilde{\psi}:P\to K$ such that $\varphi\circ\tilde{\psi}=\psi$.
\end{definition}

\begin{proposition}
If an equalizer exists then it is unique up to unique isomorphism.
\end{proposition}

\begin{proof}
Suppose $\varphi:K\to M,\psi:L\to M$ be equalizers of $(\varphi_1,\varphi_2)$. Then we have
\begin{align*}
\varphi\circ\tilde{\psi}=\psi,\quad\psi\circ\tilde{\varphi}=\varphi
\end{align*}
By the uniqueness, we have $\tilde{\varphi}\circ\tilde{\psi} = 1_L,\tilde{\psi}\circ\tilde{\varphi} = 1_K$. 
\end{proof}

\begin{definition}
Let $\mathcal{A},\mathcal{B}$ be categories. A functor $F:\mathcal{A}\to\mathcal{B}$ is a function such that for each $f\in\mathcal{A}(A,A')$, $F(f):F(A)\to F(A')$. In other words, $f\mapsto F(f):\mathcal{A}(A,A')\to\mathcal{B}(F(A),F(A'))$. Furthermore, $F$ satisfies the following axioms.
\begin{enumerate}[I).]
\item $F(f'\circ f) = F(f')\circ F(f)$ whenever $f:A\to A',f':A'\to A''$ in $\mathcal{A}$,
\item $F(1_A) = 1_{F(A)}$ whenever $A\in\mathcal{A}$. 
\end{enumerate}
\end{definition}

\begin{definition}
Let $F,G$ be functors between two categories $\mathcal{A},\mathcal{B}$. A natural transformation $\alpha:F\to G$ is a family $(\alpha_A:F(A)\to G(A))_{A\in\mathcal{A}}$ such that 
\[ \begin{tikzcd}
F(A) \arrow{r}{F(f)} \arrow[swap]{d}{\alpha_A} & F(A') \arrow{d}{\alpha_{A'}} \\%
G(A) \arrow{r}{G(f)}& G(A')
\end{tikzcd}
\]
is a commutative diagram. Each $\alpha_A$ is called a component of $\alpha$. 
 \label{natural_transformation}
\end{definition}

\subsection{Direct Limits}

\begin{definition}
A partially ordered set $(X,\leq)$ is directed if for any $x,y\in X$ there is $z\in X$ such that $x\leq z$ and $y\leq z$.
\end{definition}

\begin{example}
Let $(X,\mathcal{T})$ be a topological space. A partially ordered set $(\mathcal{T},\leq)$ such that 
\begin{equation*}
V\subseteq U\Rightarrow U\leq V
\end{equation*}
is directed. Since for any $U\in\mathcal{T}$, $U\leq \emptyset$. As a category this is $\mathbf{Ouv}_X^{\mathbf{op}}$.
\end{example}

\begin{example}
\label{top_dir_cat}
Let $(X,\mathcal{T})$ be a topological space. For $x\in X$, define $O_x = \{U\in\mathcal{T}\:|\: x\in U\}$. If we define an order as in the previous example, we get $(O_x,\leq)$ is directed. This follows from for any $U,V\in O_x$, $U,V\leq U\cap V$.  
\end{example}

\begin{definition}
Let $I$ be a directed partially ordered set and $\mathcal{A}$ be a category. A directed system of objects of $\mathcal{A}$ indexed by $I$ is a collection of objects $(A_i)_{i\in I}$ and morphisms $(\rho_{ij})_{i\leq j}$ of $\mathcal{A}$ such that 
\begin{enumerate}[i).]
\item $\rho_{ii}=\mathbf{id}_{A_i}$,
\item for $i,j,k\in I$, $i\leq j \leq k \Rightarrow \rho_{ik} = \rho_{jk}\circ\rho_{ij}$.
\end{enumerate}
\end{definition}

\begin{remark}
Categorically, the directed system of objects of $\mathcal{A}$ indexed by $I$ is a functor $\mathcal{O}^{op}\to\mathcal{C}$, where $\mathcal{O}$ is a category which encodes the ordered set $I$ as a category by the same procedure as in Example \ref{order_category}. Then a directed system if a functor $\mathcal{O}^{\mathbf{op}}\to\mathcal{A}$.
%Revise the sentences, check the definitions
\end{remark}

\begin{definition}
Given a directed system $((A_i)_{i\in I},\{\rho_{ij}\}_{i\leq j})$ of objects in $\mathcal{A}$ indexed by $I$. A direct limit of the system is an object $\varinjlim{A_n}\in\mathbf{ob}(\mathcal{A})$ satisfying the following universal property.\\
\par Given a collection of morphisms $(f_i)_{i\in I}$ such that 
\begin{enumerate}[i).]
\item $f_i:A_i\to\varinjlim A_n\in\mathcal{A}$,
\item for any $i\leq j$, $f_j\circ\rho_{ij} = f_i$.
\end{enumerate}
For any $A\in\mathcal{A}$ where there is a collection of morphisms $(g_i)_{i\in I}$ satisfying the above condition, there is a unique map $\varphi:\varinjlim A_n\to A$ such that

\[ 
\begin{tikzcd}
A_i \arrow[rr, "\rho_{ij}", no head] \arrow[rd, "f_i"] \arrow[rdd, swap, "g_i", bend right] &                                               & A_j \arrow[ld, "f_j"'] \arrow[ldd, "g_j", bend left] \\
                                                                                      & \varinjlim A_n \arrow[d, "\exists !", dotted] &                                                      \\
                                                                                      & A                                             &                                                     
\end{tikzcd}
\]

is a commutative diagram.
\end{definition}

\begin{proposition}
\label{direct_limit_exact_functor}
$\varinjlim$ is an exact functor.\
%Check the definition of exact functor.
\end{proposition}

\begin{proof}
%Missing proof
\end{proof}

\begin{proposition}
In the cases where $\mathcal{A}=(\mathbf{Ab}),(\mathbf{Sets})$, there exist direct limits and for each category, such limit is constructed in the following ways.
\begin{enumerate}[i).]
\item $\varinjlim A_n = (\bigoplus_{i\in I}A_i)/N$ where $N=\{a_i-\rho_{ij}(a_i)\:|\:a_i,i\leq j\}$.
\item $\varinjlim A_n = (\coprod_{i\in I}A_i)/\sim$ where $a_i\sim a_j$ if there is $k$ such that $i\leq k$ $j\leq k$, and $\rho_{ik}(a_i)=\rho_{jk}(a_j)$.
\end{enumerate}
Furthermore, these two direct limits coincide as sets.
\end{proposition}

\begin{proof}
%Missing proof
\end{proof}

\begin{proposition}
$\varinjlim$ is (left) exact in $(\mathbf{Ab})$. In other words, 
given a exact sequence of directed systems 
\[
\begin{tikzcd}
0 \arrow[r] & (M_i)_{i\in I} \arrow[r] & (N_i)_{i\in I} \arrow[r] & (P_i)_{i\in I} \arrow[r] & 0
\end{tikzcd}
\]
in which we have
\[
\begin{tikzcd}
0 \arrow[r] & M_i \arrow[r] \arrow[d, "\rho^M_{ij}"'] & N_i \arrow[r] \arrow[d, "\rho^N_{ij}"'] & P_i \arrow[r] \arrow[d, "\rho^P_{ij}"'] & 0 \\
0 \arrow[r] & M_j \arrow[r]                           & N_j \arrow[r]                           & P_j \arrow[r]                           & 0
\end{tikzcd}
\]
There exists a short exact sequence 
\[
\begin{tikzcd}
0 \arrow[r] & \varinjlim M_n \arrow[r] & \varinjlim N_n \arrow[r] & \varinjlim P_n \arrow[r] & 0
\end{tikzcd}
\]
\end{proposition}

\begin{proof}
%Missing proof
\end{proof}

\section{Commutative Algebra}

\subsection{Local Rings}

\begin{definition}
The total ring of fraction of a ring $A$ is a localization of $A$ by the set of all non-zero divisors. It is denoted as $Q(A)$.
\end{definition}

\begin{definition}
A ring is said to be local if it has a unique maximal ideal.
\end{definition}

\begin{definition}
A ring homomorphism $\phi:(A,\mathfrak{m}_A)\to (B,\mathfrak{m}_B)$ of two local rings is said to be local if 
\begin{equation*}
\mathfrak{m}_A = \phi^{-1}(\mathfrak{m}_B).
\end{equation*}
\end{definition}

\begin{example}
Let $i:\mathbb{Z}_{(p)}\to Q(\mathbb{Z}_{(p)})$ be an inclusion map. Then it is a homomorphism of local rings. However, If $p$ is prime then $Q(\mathbb{Z}_{(p)})$ is a field thus its maximal ideal is $(0)$. Obviously
\begin{equation*}
i^{-1}((0) = (0).
\end{equation*}
Therefore, $i$ is not a local ring homomorphism.
\end{example}

\begin{proposition}
Let $\phi:A\to B$ be a ring homomorphism. Recall that for any prime ideal $\mathfrak{q}\subseteq B$, we have $\mathfrak{p}=\phi^{-1}(\mathfrak{q})$ is a prime ideal in $A$. Thus $\phi$ induces a homomorphism between $A_{\mathfrak{p}}$ and $B_{\mathfrak{q}}$ which is a local ring homomorphism.
\end{proposition}

\begin{proof}
If $a\in A$, $\phi(a)=0$ then $a\in\mathfrak{p}$. Thus $\phi(s)\not=0$ for any $s\not\in\mathfrak{p}$. Since $\mathfrak{p},\mathfrak{q}$ are unique maximal ideals of  $A_{\mathfrak{p}}$ and $B_{\mathfrak{q}}$, respectively. We derived the claim.
\end{proof}

\begin{lemma}
Let $k$ be an algebraically closed field and $A$ be a $k$-algebra. A localization $A_{\mathfrak{m}}$ by a maximal(prime) ideal$\mathfrak{m}\subset A$, we have the following isomorphism.
%later check if this holds for prime ideals.
\begin{equation*}
k\cong A_{\mathfrak{m}}/\mathfrak{m}A_{\mathfrak{m}}.
\end{equation*}
\label{k_algebra_localization}
\end{lemma}

\begin{proof}
Follows from the algebraically closedness of $k$.%later
\end{proof}


\subsection{Maximal Spec}

\begin{definition}
Let $R$ be a commutative ring. We define the maximal spec of $R$ as 
\begin{equation*}
\MaxSpec(R) = \{\mathfrak{m}\Spec(R)\:|\: \mathfrak{m}\text{ is a maximal ideal}.\}.
\end{equation*}
\end{definition}

\begin{lemma}
Let $k$ be an algebraically closed field. We have the following isomorphism
\begin{equation*}
\MaxSpec{k[x_1,\cdots,x_n]}\cong k^n,\quad (x_1-a_1,\cdots,x_n-a-n)\leftrightarrow (a_1,\cdots,a_n).
\end{equation*}
\end{lemma}

\begin{proof}
Surjectivity follows from the algebraically closedness of $k$. %later
\end{proof}

\subsection{Zariski Topology}

\begin{definition}
Let $k$ be a algebraically closed field. A subset $X$ of $k^n$ is called an affine algebraic set if there exists an ideal $\mathfrak{a}\subset k[x_1,\cdots,x_n]$ such that
\begin{equation*}
X=V(\mathfrak{a}) = \{(a_1,\cdots,a_n)\:|\: \forall f\in\mathfrak{a}, f(a_1,\cdots,a_n)=0\}.
\end{equation*}
\end{definition}

\begin{definition}
Let $k$ be an algebraically closed. The Zariski topologi on $k^n$ is a topology generated by affine algebraic sets as closed subsets. 
\end{definition}

\begin{definition}
Let $X$ be the Zariski topology on $k^n$. A function $f:X\supseteq U\to k$ is said to be regular if for any $a=(a_1,\cdots,c_n)\in U$, there exist a neighborhood $U_a\subseteq U$ and $f_1,f_2\in k[x_1,\cdots,x_n]$ such that 
\begin{equation*}
(b_1,\cdots,b_n)\in V_a \Rightarrow f(b_1,\cdots,b_n) = {\frac {f_1(b_1,\cdots,b_n)} {f_2(b_1,\cdots,b_n)}}.
\end{equation*}
\end{definition}

\begin{remark}
A regular function $f$ on the Zariski topology on $k^n$ is continuous as they are locally equivalent to quotients of polynomial functions.
\label{reg_cont_inc}
\end{remark}

\begin{lemma}
Let $\mathfrak{a}\subset A$ be an ideal. Then we have the following are homeomorphic.
\begin{equation*}
\Spec(A/\mathfrak{a}) \cong V(\mathfrak{a}).
\end{equation*}
\end{lemma}

\begin{lemma}
Let $A$ be a commutative ring and $a\in A$. For elements ${\frac {b_1} {a^{n_1}}},{\frac {b_2} {a^{n_2}}}$ of $A_a$, assume that for any $\mathfrak{p}\in D(a)$, 
\begin{equation*}
{\frac {b_1} {a^{n_1}}},{\frac {b_2} {a^{n_2}}}\in A_{\mathfrak{p}}, \quad {\frac {b_1} {a^{n_1}}}={\frac {b_2} {a^{n_2}}}
\end{equation*}
Let us define an ideal
\begin{equation*}
\mathfrak{q} = \Ann(b_1a^{n_2}-b_2a^{n_1}).
\end{equation*}
Then for any $\mathfrak{p}\in D(a)$, we have $\mathfrak{q}\not\subseteq \mathfrak{p}$.
\end{lemma}

\section{Classical Algebraic Geometry}

\subsection{Affine Variety}

\begin{definition}
An affine algebraic set $X$ is called an affine variety if there exists a prime ideal $\mathfrak{p}\subseteq k[x_1,\cdots,x_n]$ such that
\begin{equation*}
X=V(\mathfrak{p}).
\end{equation*}
\end{definition}

\begin{definition}
Let $k$ be an algebraically closed field and $X\subseteq k^n$. The ideal of $X$ is 
\begin{equation*}
I(X)=\{f\in k[x_1,\cdots,x_n]\:|\: \forall (a_1,\cdots,a_n)\in X, f(a_1,\cdots,a_n) = 0\}.
\end{equation*}
\end{definition}

\begin{theorem}
For any ideal $\mathfrak{a}\subset k[x_1,\cdots,x_n]$, we have
\begin{equation*}
I(V(\mathfrak{a})) = \sqrt{\mathfrak{a}}.
\end{equation*}
\end{theorem}

\begin{definition}
Let $X\subset k^n$ where $k$ is an algebraically closed field. The affine coordinate ring with respect to $X$ is 
\begin{equation*}
A(X)=k[x_1,\cdots,x_n]/I(X).
\end{equation*}
\end{definition}

\section{Sheaf Theory}

\subsection{Presheaves}

\begin{definition}
Let $(X,\mathcal{T})$ be a topological space. We define a presheaf $\mathcal{F}$ of a category $\mathcal{A}$ on $X$ to be such that 
\begin{enumerate}[\textbullet]
\item $U\in\mathcal{T}$, $\mathcal{F}(U)\in\ob(\mathcal{A})$,
\item $U,V\in\mathcal{T}$, $V\subset U \Rightarrow $ there exists a map $\rho_{UV}:\mathcal{F}(U)\to\mathcal{F}(V)$ 
\end{enumerate}

satisfying,
\begin{enumerate}[i).]
\item For any $U\in\mathcal{T}$, $\rho_{UU}=1_{\mathcal{F}(U)}$.
\item $U,V,W\in\mathcal{T}, W\subset V\subset U\rightarrow \rho_{UW}=\rho_{VW}\circ\rho_{UW}$.
\end{enumerate}
\end{definition}

\begin{notation}
In the case $\mathcal{A} = (\mathbf{Sets}),(\mathbf{Ab})$, $\mathcal{F}(\emptyset)=\emptyset,\{1\}$, respectively.
\end{notation}

\begin{definition}
An element of $\mathcal{F}(U)$ is called a local section of $\mathcal{F}$ and $\Gamma(U,\mathcal{F}) = \mathcal{F}(U)$ is called the space of sections over $U$. In particular $\Gamma(X,\mathcal{F})$ is called the space of global sections of $\mathcal{F}$.
\end{definition}

\begin{definition}
Let $(X,\mathcal{T})$ be a topological space and $\mathcal{F}$ be a presheaf of a category $\mathcal{A}$ on $X$. Suppose we have two open sets $U,V\in\mathcal{T}$ such that $V\subset U$. Then for any section $s\in\mathcal{F}(U)$, $s|_V=\rho_{UV}(s)$ is called the restriction of $s$ to $V$.
\end{definition}

\begin{example}
Let $(X,\mathcal{T})$ be a topological space. We have a presheaf of continuous functions $\mathcal{C}_X(U)=\mathcal{C}^0(U,\mathbb{R})$. This is indeed a presheaf with restriction maps $\rho_{UV}:\mathcal{C}_X(U)\to\mathcal{C}_X(V)$. (Explicitly, $\rho_{UV}(f) = f\circ i_V$ where $i_V$ is an inclusion map.)  We note that we can introduce operations $+,\cdot$ to endow some algebraic structures (groups, rings, ...) on $\mathbb{R}$.
\end{example}

\begin{example}
Let $(X,\mathcal{T})$ be a topological space and suppose we have presheaves 
\begin{enumerate}[\textbullet]
\item $\mathcal{C}^{\textbf{diff}}_X(U) = \{f:U\to\mathbb{R}\:|\: f\text{ is differentiable.}\}$.
\end{enumerate}
Then there is an inclusion relation $\mathcal{C}^{\textbf{diff}}_X(U)\subseteq\mathcal{C}_X(U)$ and this defines a presheaf.
\end{example}

\begin{example}
Let $(X,\mathcal{T}_X)$,$(Y,\mathcal{T}_Y)$ be topological spaces. Define a presheaf on $X$ by 
\begin{equation*}
U\in\mathcal{T}_X, \mathcal{F}(U) = \mathcal{C}^0(X,Y).
\end{equation*}
And like the previous example, we define $\rho_{UV}(f) = f|_V$ for $U,V\in\mathcal{T}_X, V\subset U$. the restriction of $f$ to $V$. \\
But this is a presheaf only of a set. 
\end{example}

\begin{example}
Let $(X,\mathcal{T})$ be a topological space and $G$ be an abelian group. The constant presheaf $\mathbb{G}$ is such that 
\begin{equation*}
U\in\mathcal{T}, \mathbb{G}(U) = G,
\end{equation*}
with $\rho_UV=id_G$ for any $U,V\in\mathcal{T},V\subset U$. 
\end{example}

\subsection{Presheaves as Categories}

\begin{definition}
Let $(X,\mathcal{T})$ be a topological space then $(\mathbf{Ouv}_X)$ is the category such that its objects are the open sets of $X$ and for any $U,V\in\mathcal{T}$ we have
\begin{equation*}
\mathbf{Ouv}_X(U,V)=
\begin{cases}
\emptyset \quad (V\not\subset U),\\
i_V \quad (V\subset U).
\end{cases}
\end{equation*}
\end{definition}

\begin{definition}
Let $(X,\mathcal{T})$ be a topological space and $\mathcal{A}$ be a category. A presheaf of $\mathcal{A}$ on $X$ is a functor $F:\mathbf{Ouv}_X\to\mathcal{A}$.
\end{definition}

\begin{example}
For $\mathbf{Ouv}_X$, we can define a presheaf of $F$ to be
\begin{equation*}
\ob(\mathbf{Ouv}_X)\ni U\mapsto F(U) = \mathcal{C}^0(U,\mathbb{R}).
\end{equation*}
\end{example}

\begin{example}
\label{structure_sheaf_ring}
Let $A$ be a commutative ring with non-zero multiplicative identity and $X=\Spec(A)$. Let us consider the Zariski topology $(X,\mathcal{T})$. Let us consider a category $\mathcal{O}_X$ such that
\begin{enumerate}[\textbullet]
\item $\ob(\mathcal{O}_X) = \mathcal{T}$,
\item $\mathcal{O}_X(U) =  \{s:U\to\coprod_{\mathfrak{p}\in U}A_{\mathfrak{p}}\}$,
\end{enumerate}
where $s:U\to\coprod_{\mathfrak{p}\in U}A_{\mathfrak{p}}$ is a function such that for any $\mathfrak{p}\in U$,
\begin{enumerate}[i).]
\item $s(p)\in A_{\mathfrak{p}}$,
\item there exists an open set $V\subset U$ such that $\mathfrak{p}\in V$ and for any $\mathfrak{q}\in V$,  $s(\mathfrak{q})={\frac a b}$ for $b\not\in\mathfrak{q}$. 
\end{enumerate}
Now we define a presheaf by the restrictions of maps such that
\begin{equation*}
s:U\to\coprod_{\mathfrak{p}\in U}A_{\mathfrak{p}} \mapsto s|_V:V\to\coprod_{\mathfrak{q}\in V} A_{\mathfrak{q}}.
\end{equation*}
\end{example}

\begin{definition}
Let $(X,\mathcal{T})$ be a topological space and $\mathcal{A}$ be a category. We define a set of presheaves of $\mathcal{A}$ on $X$ as
\begin{equation*}
\PreSh_{\mathcal{A}}(X)=\Fun(\mathbf{Ouv}_X^{\mathbf{op}},\mathcal{A}).
\end{equation*}
\end{definition}

\begin{definition}
A morphism of presheaves is a natural transformation $\varphi:\mathcal{F}\to \mathcal{G}$ where $\mathcal{F},\mathcal{G}\in\PreSh_\mathcal{A}(X)=\Fun(\mathbf{Ouv}_X^{\mathbf{op}},\mathcal{A})$.(See Definition \ref{natural_transformation}).\\
\par Such $\varphi:\mathcal{F}\to\mathcal{G}$ is 
\begin{enumerate}[i).]
\item injective if 
\end{enumerate}
%Find definitions for the natural transformation to be injective/surjective/epimorphism. Should put this into the category theory section.
\end{definition}



\begin{remark}
$\PreSh(X)$ can be regarded as a category with its objects presheaves and morphisms defined above. 
\end{remark}

\begin{notation}
In the case $\mathcal{A}= (\mathbf{Ab})$ then we denote $\PreSh(X)=\PreSh_{\mathbf{Ab}}(X)$.
\end{notation}

\begin{example}
Let $X$ be a differential manifold(eg. $X\subset\mathbb{R}^n$). Let us define 
\begin{equation*}
\mathcal{C}^{\mathbf{diff}}(U) = \{f:U\to\mathbb{R}\:|\:f\text{ is differentiable.}\}. 
\end{equation*}
Then the inclusions $\mathcal{C}_X^{\mathbf{diff}}(U)\subset\mathcal{C}_X(U)$ defines a morphism of presheaves.
\end{example}

\begin{example}
Let $X,Y=S^1$ be topological spaces and $F$ be a presheaf such that for any open set $U\subset X$, $F(U)=\mathcal{C}^0(U,Y)$.Then we can introduce a natural transformation such that 
\begin{equation*}
\mathcal{C}_X(U)\ni f\mapsto \exp(2\pi fi)
\end{equation*}
which is indeed a morphism of presheaves $\mathcal{C}_X(U)$ and $F(U)$
%Gives an explicit formula for the restrictions
\end{example}

\subsection{Sheaves}

\begin{definition}
A presheaf $\mathcal{F}$ on $(X,\mathcal{T})$ is called a sheaf if the following holds.
For any collection of open sets $(U_i)_{i\in I}\subset \mathcal{T},U=\bigcup_{i\in I}U_i$, the map $\varphi:\mathcal{F}(U)\to\prod_{i\in I}\mathcal{F}(U_i)$ which is defined as
\begin{equation*}
\varphi(s) = (s|_{U_i})_{i\in I}.
\end{equation*}
is the equalizer of the following functions $\varphi_1,\varphi_2:\prod_{i\in I}\mathcal{F}(U_i)\to\prod_{i,j\in I}\mathcal{F}(U_i\cap U_j)$, 
\begin{equation*}
\varphi_1((s_i)_{i\in I}) = (s_i|_{U_i\cap U_j})_{i,j\in I},\quad\varphi_1((s_i)_{i\in I}) = (s_j|_{U_i\cap U_j})_{i,j\in I}.
\end{equation*}
\end{definition}

\begin{remark}
In the case $I=\{1,2\}$, we have $U=U_1\cup U_2$, and for any $U'\in\mathcal{T}$ such that $U\subset U'$, we have for $\mathcal{F}(U')\ni s:U'\to\mathbb{R}$ ,$\psi(s) = (s|_{U_1},s|_{U_2})$, as in $\mathbf{Ouv}_X$, morphisms are inclusions. Let $\tilde{\psi}(s) = s|_{U}$, then this satisfies the condition for the equalizer (ie. $\varphi\circ\tilde{\psi}=\psi$). 
\end{remark}

\begin{remark}
A presheaf $\mathcal{O}_X$ with $X=\Spec(A)$ is a sheaf.
\end{remark}

\begin{example}
Let $(X,\mathcal{T})$ be a topological space and $G$ be a group. We define a constant presheaf $\mathbb{G}(U) = G$. In general, this is not a sheaf. Instead, we define a constant sheaf $\underline{\mathbb{G}}(U) = \mathcal{C}^0(U,G)$ where $G$ is regarded as a topological space with the discrete topology. Then for any connected component of $X$ is mapped to a single point set in $G$.
%Review the definition and properties of fundamental groups.
\end{example}

\begin{definition}
Let $\mathcal{F}_1,\mathcal{F}_2$ be sheaves. A mapping $\varphi:\mathcal{F}_1\to\mathcal{F}_2$ is called a morphism of sheaves if it is a morphism of presheaves.
\end{definition}

\begin{notation}
A set of sheaves of $\mathcal{A}$ on the topological space $(X,\mathcal{T})$ is denoted as $\Sh_{\mathcal{A}}(X)$.
\end{notation}

\begin{remark}
As in the case of presheaves, $\Sh_\mathcal{A}(X)$ can be regarded as a category with sheaf morphisms.
\end{remark}

\begin{remark}
$\Sh_{\mathcal{A}}(X)$ is a full-subcategory of $\PreSh_{\mathcal{A}}(X)$.
\end{remark}

\begin{notation}
In the case $\mathcal{A}=(\mathbf{Ab})$, we denote $\Sh_{(\mathbf{Ab})}(X) = \Sh(X)$. 
\end{notation}

\subsection{Stalks}

\begin{notation}
Let $(X,\mathcal{T})$ be a topological space. For a point $x\in X$ ,we denote the collection of all open sets which contain $x$ as
\begin{equation*}
\mathcal{O}_x = \{U\in\mathcal{T}\:|\: x\in U\}.
\end{equation*}
\end{notation}

\begin{definition}
\label{def_stalk}
Suppose we have a topological space $(X,\mathcal{T})$ and a category $\mathcal{A}$ which admits direct limits. For a presheaf $\mathcal{F}\in\PreSh_{\mathcal{A}}(X)$, by inheriting the notations from Example \ref{top_dir_cat}, we define the stalk $\mathcal{F}_x$ of $\mathcal{F}$ at $x\in X$ by
\begin{equation*}
\mathcal{F}_x = \varinjlim_{U\in\mathcal{O}_x}\mathcal{F}(U).
\end{equation*}
%Check if this can be defined in more general settings.
\end{definition}

\begin{example}
\label{stalk_ex1}
Let us assume that $\mathcal{A}=(\mathbf{Ab})$ in Definition \ref{def_stalk}. Then stalks and germs can be constructed explicitly in the following way.
\begin{equation*}
\mathcal{F}_x = \{(s,U)\:|\: U\in\mathcal{O}_x, s\in\mathcal{F}(U)\}/\sim,
\end{equation*}
where $\sim$ is an equivalent relation such that for $(s,U),(t,V)$,
\begin{equation*}
(s,U)\sim(t,V) \text{ if there is } W\in\mathcal{O}_x \text{ such that } W\subseteq U\cap V, \rho_{UW}(s)=\rho_{VW}(t).
\end{equation*}
\end{example}

\begin{definition}
Inheriting the notations from Definition \ref{def_stalk}, suppose we have $(f_U:\mathcal{F}(U)\to\mathcal{F}_x)_{U\in\mathcal{O}_x}$ such that for $f_U, f_V$ are compatible with $\rho_{UV}$. Then we define the germ of $s\in\mathcal{F}(U)$ to be $s_x=f_U(s)$. By the universal property of the direct limit, such $s_x$ is unique up to images under isomorphisms.
\end{definition}

\begin{example}
In the case of Remark \ref{stalk_ex1}, we have for each $U\in\mathcal{T}$, $x\in U$, and $s\in\mathcal{F}(U)$,
\begin{equation*}
s_x = \{(t,V)\:|\: \text{ There is } W\in\mathcal{O}_x \text{ such that } W\subseteq U\cap V, \rho_{UW}(s)=\rho_{VW}(t)\}.
\end{equation*}
\end{example}

\begin{remark}
In the above definition, if a category $\mathcal{A}$ admits products, we get a map
\begin{equation}
\label{germ_map}
(s\mapsto (s_x)_{x\in U})):\mathcal{F}(U)\to\prod_{x\in U}\mathcal{F}_x.
\end{equation}
This is neither surjective nor injective in general.
\end{remark}

\begin{proposition}
\label{stalk_lifting}
Suppose in the definition of stalks, $\mathcal{F}$ is a sheaf. Then the map defined by Equation \ref{germ_map} is injective.
\end{proposition}

\begin{proof}
We prove the case when $\mathcal{A}=(\mathbf{Ab})$. \\
\par Suppose $s\in\mathcal{F}(U)$ is such that $s_x=0$ in $\mathcal{F}_x$ for all $x\in U$. Since for any restriction maps are group homomorphisms. We have that there is $V_x\in\mathcal{O}_x$ such that 
\begin{equation*}
V_x\subseteq U,\quad\rho_{UV_x}(s) = 0.
\end{equation*}
Therefore $\{V_x\}_{x\in U}$ is an open covering of $U$. Since $\mathcal{F}$ is a sheaf, we derive that $s=0$ in $\mathcal{F}(U)$.
\end{proof}

\begin{example}
Given $(X,\mathcal{F})$, a topological space and $G$, an abelian group. We will consider the constant presheaf $\mathbb{G}$ and the constant sheaf $\underline{\mathbb{G}}$ on $X$. For any open set $U$ and $x\in U$ we have
\begin{equation*}
\mathbb{G}_x\cong\underline{\mathbb{G}}_x\cong G.
\end{equation*}
For any $U,V$ open such that $V\subset U$ we have, $\rho_{UV}=\mathbf{id}_G$. Thus by the construction, for $x\in U,V$, $(s,U)\sim (t,V)$ then $x\in U\cap V$ and $\rho_{UU\cap V}(s) = s=t=\rho_{VU\cap V}(t)$. Therefore, we proved the claim.
\end{example}

\begin{definition}
\label{stalk_morphism}
Suppose $\varphi:\mathcal{F}\to\mathcal{G}$ be a morphism of presheaves. Then we define 
\begin{equation*}
\varphi_x(s_x)=(\varphi(s)_U)_x.
\end{equation*}
This defines a morphism of presheaves. 
\end{definition}

\begin{remark}
Categorically, taking stalks is a functor for each $x\in X$. Suppose we have $\mathcal{F},\mathcal{G}\in\PreSh_\mathcal{A}(X)$ and a morphism $\varphi:\mathcal{F}\to\mathcal{G}$, 
\end{remark}

\begin{proposition}
Let $\mathcal{F},\mathcal{G}\in\Sh_{(\mathbf{Ab})}(X)$ Then for any morphism $\varphi:\mathcal{F}\to\mathcal{G}$ we have
\begin{equation*}
\varphi = 0 \Leftrightarrow \forall x\in X,  \varphi_x = 0
\end{equation*}
\label{unit_sheaf_morphism}
\end{proposition}

\begin{proof}
$\Rightarrow$ is trivial by its construction. We will prove $\Leftarrow$.\\
\par We first note that $\varphi=0$ means that for any $U\in \mathcal{T}$, we have $\varphi_U\equiv0$ as a group homomorphism. Let $U\in\mathcal{T}$ and $s\in\mathcal{F}(U)$. Then by the assumption and Proposition \ref{stalk_lifting}, we have proven the claim.
\end{proof}

\subsection{Sheafification}

\begin{definition}
Let $\mathcal{F}\in\PreSh_\mathcal{A}(X)$. The sheafification of $\mathcal{F}$ is a presheaf $\mathcal{F}^+$ which is a set of all $(s_x)_{x\in U}\in\prod_{x\in U}\mathcal{F}_x$ such that
for any $x\in U$ there is $x\in V_x\subset U$, such that there is $t\in\mathcal{F}(V_x)$ satisfying for any $y\in V_x$, $s_y = t_y$. We give them restrictions such that
\begin{equation*}
\mathcal{F}^+(U)\ni (s_x)_{x\in U}\mapsto (s_x)_{x\in V}\in \mathcal{F}^+(V).
\end{equation*}
\end{definition}

\begin{proposition}
Such $\mathcal{F}^+$ is indeed a sheaf.
\end{proposition}

\begin{proof}
later
\end{proof}

\begin{remark}
\begin{equation*}
\mathcal{F}\mapsto\mathcal{F}^+:\PreSh_\mathcal{A}(X)\to\Sh_\mathcal{A}(X)
\end{equation*}
is a functor. Indeed given $\varphi:\mathcal{F}\to\mathcal{G}$, a morphism of presheaves. We give
\begin{equation*}
\varphi^+(U)((s_x)_{x\in U}) = (\varphi(s)_x)_{x\in U}.
\end{equation*}
later
\end{remark}

\begin{proposition}
A mapping $\varphi:\mathcal{F}\to\mathcal{F}^+$ such that for each $U\in\mathcal{T}$, 
\begin{equation*}
\varphi_U:\mathcal{F}(U)\to\mathcal{F}^+(U),\quad \varphi(s)=(s_x)_{x\in U},
\end{equation*}
is a natural transformation thus a morphism of presheaves.
\end{proposition}

\begin{proof}
Later
\end{proof}

\begin{proposition}
\label{section_rep}
For any open set $U\in\mathcal{T}$ and a section $s\in\mathcal{F}^+(U)$, there is an open covering $(U_i)_{i\in I}$ which satisfies that there is a sequence $(s_i)_{i\in I}\in\prod_{i\in I}\mathcal{F}(U_i)$ and for each $i$, the following hodls.
\begin{equation*}
\rho_{UU_i}(s)=s_i.
\end{equation*}
\end{proposition}
\begin{proof}
Later.
\end{proof}

\begin{proposition}
For each $x\in X$, there exists an isomorphism
\begin{equation*}
\mathcal{F}_x\cong (\mathcal{F}^+)_x,
\end{equation*}
as presheaves.
\end{proposition}

\begin{proof}
later
\end{proof}

\begin{proposition}
Let $(X,\mathcal{T})$ be a topological group and $\mathcal{F}$ be a presheaf of a category $\mathcal{A}$ on $X$. Suppose for a sheaf $\mathcal{G}$ of a category $\mathcal{A}$ on $X$, there exists a morphism $\varphi:\mathcal{F}\to\mathcal{G}$. Then there exists a unique morphism $\varphi^+:\mathcal{F}^+\to\mathcal{G}$, such that
\[
\begin{tikzcd}
\mathcal{F} \arrow[d, "\varphi"'] \arrow[r] & \mathcal{F}^+ \arrow[ld, "\exists!\varphi^+", dotted] \\
\mathcal{G}                                 &                                                      
\end{tikzcd}
\]
is a commutative diagram.
\label{sheaf_morphism_universal_property}
\end{proposition}

\begin{proof}
Let $U\in\mathcal{T}$, then by Proposition \ref{section_rep}, for any $s\in\mathcal{F}^+$, there exists an open covering $(U_i)_{i\in I}$ and $(s_i)_{i\in I}\in\prod_{i\in I}\mathcal{F}(U_i)$ such that $\rho_{UU_i}(s)=s_i$ for any $i\in I$. We define
\begin{equation*}
t_i = \varphi(s_i)\in\mathcal{G}(U_i),
\end{equation*}
for each $i\in I$. Using the definition of natural transformation we derive that
\begin{equation*}
\rho^{\mathcal{G}}_{UU_i\cap U_j}(t_i) = \varphi^{\mathcal{F}}_{U_i\cap U_j}(\rho_{UU_i\cap U_j}(s))=\rho^{\mathcal{G}}_{UU_i\cap U_j}(t_j).
\end{equation*}
Thus we can glue $(t_i)_{i\in I}$ to a section $t\in\mathcal{G}(U)$.\\
\par We now define $\varphi^+:\mathcal{F}^+\to\mathcal{G}$. Given $(s_x)_{x\in U}$ which is the germ of $s$,
\begin{equation*}
\varphi^+_{U}((s_x)_{x\in U}) = t.
\end{equation*}
Such $\varphi^+$ is unique since $\mathcal{G}$ is a sheaf.
\end{proof}

\begin{corollary}
Let $i:\Sh_\mathcal{A}(X)\to\PreSh_\mathcal{A}(X)$ be a forgetful functor. Then we have
\begin{equation*}
\PreSh_\mathcal{A}(X)(\mathcal{F},i(\mathcal{G})) \cong \Sh_{\mathcal{A}}(\mathcal{F}^+,\mathcal{G})
\end{equation*}
In other words, the sheafification is a left-adjoint functor of the inclusion map.
\end{corollary}

\begin{proof}
By Proposition \ref{sheaf_morphism_universal_property}, we define two maps $\Phi,\Psi$ such that
\begin{align*}
\Phi:\PreSh_\mathcal{A}(X)(\mathcal{F},i(\mathcal{G})) &\to \Sh_{\mathcal{A}}(\mathcal{F}^+,\mathcal{G}),&\\
& \Phi(\varphi) = \varphi^+,\\
\Psi:\Sh_{\mathcal{A}}(\mathcal{F}^+,\mathcal{G})&\to\PreSh_\mathcal{A}(X)(\mathcal{F},i(\mathcal{G})),&\\
 &\Psi(\varphi^+)  = \varphi.
\end{align*}
Then these two are inverses of each other.
\end{proof}

\begin{proposition}
Let $X=\Spec(A)$ and $\mathcal{O}_X$ be the structure sheaf defined in Example \ref{structure_sheaf_ring}. Then we have the following.
\begin{enumerate}[1).]
\item For any $\mathfrak{p}=x\in X$, $(\mathcal{O}_{X})_x \cong A_{\mathfrak{p}}$.
\item For any $a\in A$, $\mathcal{O}_X(D(a)) \cong A_a$.
\end{enumerate}
\end{proposition}

\begin{proof}
For a given $U\subset X$ open and $\mathfrak{p}\subset A$, there is $a,b\in A$ such that for $V\subset U$ open and $s\in\mathcal{O}_X(U), s:U\to\coprod_{\mathfrak{p}\in U}A_{\mathfrak{p}}$.
\begin{equation*}
s(\mathfrak{q}) = {\frac a b}\in A_{\mathfrak{q}}
\end{equation*}
holds for any $\mathfrak{q}\in V$.
\[
\begin{tikzcd}
\mathcal{O}_X(U) \arrow[r] \arrow[d, "\rho_{UV}"'] & A_\mathfrak{p} \\
\mathcal{O}_X(V) \arrow[ru]                        &               
\end{tikzcd}
\]
\end{proof}

\subsection{Morphisms in $\PreSh_{(\mathbf{Ab})}(X)$}

\begin{definition}
Let $\varphi:\mathcal{F}\to\mathcal{G}$ be a homomorphism of presheaves $\PreSh_{(\mathbf{Ab})}(X)$. Then we define the following presheaves.
\begin{enumerate}[1).]
\item $\Ker^{\mathbf{pre}}(\varphi)(U) = \Ker\varphi_U$,
\item $\Image^{\mathbf{pre}}(\varphi)(U) = \Image\varphi_U$,
\item $\Coker^{\mathbf{pre}}(\varphi)(U) = \Coker\varphi_U$.
\end{enumerate}
\end{definition}

\begin{proposition}
Such $\Ker^{\mathbf{pre}},\Image^{\mathbf{pre}},\Coker^{\mathbf{pre}}$ are presheaves.
\end{proposition}

\begin{proof}For the case of kernels.
Let $U,V\in\mathcal{T}$ and $V\subset U$. We define $\rho_UV: \Ker^{\mathbf{pre}}(\varphi)(U) \to\Ker^{\mathbf{pre}}(\varphi)(V)$ to be such that
\begin{equation*}
\rho_UV(s) = \rho^{\mathcal{F}}(s).
\end{equation*}
Such construction is justified as the diagram below is commutative.
\[
\begin{tikzcd}
\mathcal{F}(U) \arrow[r, "\rho^{\mathcal{F}}_{UV}"] \arrow[d, "\varphi_U"'] & \mathcal{F}(V) \arrow[d, "\varphi_V"] \arrow[r, "\rho^{\mathcal{F}}_{UV}"] & \mathcal{F}(W) \arrow[d, "\varphi_W"] \\
\mathcal{G}(U) \arrow[r, "\rho^{\mathcal{G}}_{UV}"']                        & \mathcal{G}(V) \arrow[r, "\rho^{\mathcal{G}}_{UV}"']                       & \mathcal{F}(W)                       
\end{tikzcd}
\]
Furthermore,
\begin{equation*}
\rho_UW(s) = \rho^{\mathcal{F}}_{UV}(s)=\rho^{\mathcal{F}}_{VW}\circ\rho^{\mathcal{F}}_{UV}(s) = \rho_{VW}\circ\rho_{UV}(s).
\end{equation*}
Thus $\Ker^{\mathbf{pre}}(\varphi)(U)$ is a presheaf.
\end{proof}

\begin{corollary}
If $\varphi:\mathcal{F}\to\mathcal{G}$ is a morphism of sheaves. Then $\Ker^{\mathbf{pre}}$ is also a sheaf.
\end{corollary}

\begin{proof}
Given $(s_i)_{i\in I}\in\prod_{i\in I}\Ker\varphi_{U_i}$ such that
\begin{equation*}
\rho(s_i)_{U_iU_i\cap U_j}=\rho(s_j)_{U_jU_i\cap U_j}
\end{equation*}
for any $i,j\in I$. Then since $\mathcal{F}$ is a sheaf, we can glue $(s_i)_{i\in I}$ to $s\in\mathcal{F}(U)$. For such $s$ we have
\begin{equation*}
\rho^{\mathcal{G}}_{UU_i}(\varphi_U(s)) = (\varphi_{U_i}(\rho^{\mathcal{F}}_{UU_i}(s))) = \varphi_{UU_i}(s_i) = 0.
\end{equation*}
Therefore, since $\mathcal{G}$ is a sheaf, $\varphi_U(s)=0$.
\end{proof}

\begin{remark}
Let $\varphi:\mathcal{F}(U)\to\prod_{i\in I}\mathcal{F}(U_i),\varphi_1:\prod_{i\in I}\mathcal{F}(U_i)\to\prod_{i,j\in I}\mathcal{F}(U_i\cap U_j),\varphi_2:\prod_{i\in I}\mathcal{F}(U_j)\to\prod_{i,j\in I}\mathcal{F}(U_i\cap U_j)$. Then $\mathcal{F}$ is a sheaf if and only if
\begin{equation*}
\Ker(\varphi_1\circ\varphi - \varphi_2\circ\varphi) = \mathcal{F}(U),
\end{equation*}
holds for any open set $U$.
\end{remark}

\begin{remark}
$\Image^{\mathbf{pre}}\varphi,\Coker^{\mathbf{pre}}\varphi$ are not in general sheaves even tho $\varphi:\mathcal{F}\to\mathcal{G}$ is a homomorphism of sheaves.
\label{sheaf_condition_kernel}
\end{remark}

\begin{example}
Let $X=\{x_1,x_2\}$ and we assign the discrete topology to it. Let $G$ be an abelian group. We define a sheaf $\mathcal{F},\mathcal{G}\in\Sh_{(\mathbf{Ab})}(X)$ by such that
\begin{equation*}
\mathcal{F}(U)=\mathcal{G}(U) = 
\begin{cases}
G\times G\quad (U=X),\\
G \quad (|U|=1),\\
0\quad (U=\emptyset).
\end{cases}
\end{equation*}
Let us define a homomorphism of sheaves $\varphi$ such that
\begin{equation*}
\varphi_U = 
\begin{cases}
\mathbf{id}_{G\times G}\quad (U=X)\\
0\quad (U\not= X).
\end{cases}
\end{equation*}
Then we have
\begin{equation*}
\Coker^{\mathbf{pre}}(\varphi)(U) = 
\begin{cases}
0\quad (U=X),\\
G\quad (U\not= X).
\end{cases}
\end{equation*}
By \ref{sheaf_condition_kernel}, we observe that
\begin{equation*}
\Coker^{\mathbf{pre}}(\varphi)(X)=G\times G/\mathbf{id}_{G\times G}(G\times G) = \{0\}.
\end{equation*}
However, 
\begin{equation*}
later.
\end{equation*}
\end{example}

\begin{definition}
Given a morphism of sheaves $\varphi:\mathcal{F}\to\mathcal{G}$, we define the following.
\begin{enumerate}[1).]
\item $\Ker(\varphi)=\Ker^{\mathbf{pre}}(\varphi)$,
\item $\Image(\varphi)=(\Image^{\mathbf{pre}}(\varphi))^+$,
\item $\Coker(\varphi)=(\Coker^{\mathbf{pre}}(\varphi))^+$.
\end{enumerate}
\end{definition}

\begin{proposition}[Universal property of kernels]
Given a sheaf homomorphism $\varphi:\mathcal{F}\to\mathcal{G}$. For any sheaf homomorphism $\alpha:\mathcal{H}\to\mathcal{F}$, $\varphi\circ\alpha = 0$ if and only if there is a unique $\psi:\mathcal{H}\to\Ker\varphi$ such that
\[
\begin{tikzcd}
                                        & \mathcal{H} \arrow[d, "\alpha"] \arrow[rd, "\varphi_0=0"] \arrow[ld, "\exists!\psi"', dotted] &             \\
\Ker(\mathcal{\varphi}) \arrow[r, hook] & \mathcal{F} \arrow[r, "\varphi"']                                                           & \mathcal{G}
\end{tikzcd}
\]
is a commutative diagram.
\end{proposition}
\begin{proof}
We argue by each open set of the space.
\[
\begin{tikzcd}
                                        & \mathcal{H}(U) \arrow[d, "\alpha_U"] \arrow[rd, "(\varphi_0)_U=0"] \arrow[ld, "\exists!\psi_U"', dotted] &             \\
\Ker(\mathcal{\varphi})(U) \arrow[r, hook] & \mathcal{F}(U) \arrow[r, "\varphi_U"']                                                           & \mathcal{G}(U)
\end{tikzcd}
\]
This is a universal property of the kernel in abelian groups. Thus the statement immediately follows from it.
\end{proof}

\begin{proposition}[Universal property of Cokernels]
Given a sheaf homomorphism $\varphi:\mathcal{F}\to\mathcal{G}$. For any sheaf homomorphism $\alpha:\mathcal{G}\to\mathcal{H}$, $\alpha\circ\varphi = 0$ if and only if there is a unique $\psi:\Coker\varphi\to\mathcal{H}$ such that
\[
\begin{tikzcd}
\mathcal{F} \arrow[r, "\varphi"] \arrow[r] \arrow[rd, "\varphi_0=0"'] & \mathcal{G} \arrow[r,"\pi"] \arrow[d, "\alpha"]                 & \Coker(\varphi) \arrow[ld, "\exists!\psi"', dotted, swap]\\
                                                                    & \mathcal{H}  &                
\end{tikzcd}
\]
is a commutative diagram.
\end{proposition}

\begin{proof}
We argue for each open set $U\subset X$. 
\[
\begin{tikzcd}
\mathcal{F}(U) \arrow[r, "\varphi_U"] \arrow[r] \arrow[rd, "(\varphi_0)_U=0"'] & \mathcal{G}(U) \arrow[r] \arrow[d,"\alpha_U"] & \Coker^{\mathbf{pre}}(\varphi)(U) \arrow[ld, "\exists!\psi^{\mathbf{pre}}_U"', dotted] \arrow[r]& \Coker(\varphi)(U) \arrow[lld, "\exists!\psi_U", dotted] \\
                                                                    & \mathcal{H}(U)                     &                                                                                   &                                                    
\end{tikzcd}
\]
By the universal property of Cokernels of abelian groups, there is a unique $\varphi^{\mathbf{pre}}$. By the universal property of the sheafification operator, we derive a unique $\psi$.
\end{proof}

\begin{proposition}
Let $x\in X$, then we have the following.
\begin{enumerate}[1).]
\item $\Ker(\varphi)_x=\Ker(\varphi_x)$,
\item $\Image(\varphi)_x=\Image(\varphi_x)$,
\item $\Coker(\varphi)_x=\Coker(\varphi_x)$.
\end{enumerate}
\end{proposition}

\begin{proof}
By Definition, \ref{stalk_morphism}
\end{proof}

\begin{definition}
Let $\varphi:\mathcal{F}\to\mathcal{G}$ be a sheaf morphism. $\varphi$ is called
\begin{enumerate}[1).]
\item a monomorphism if any morphism of sheaves $\varphi_0:\mathcal{H}\to\mathcal{F}$, $\varphi\circ\varphi_0=0$ if and only if $\varphi_0=0$,
\end{enumerate}
\end{definition}

\begin{proposition}
Let $\varphi:\mathcal{F}\to\mathcal{G}$ be a morphism of sheaves of $(\mathbf{Ab})$. Then the following statements are equivalent.
\begin{enumerate}[i).]
\item $\varphi$ is a monomorphism.
\item $\Ker\varphi = 0$.
\item For any open set $U\subset X$, $\varphi_U$ is injective.
\item For any $x\in X$, $\varphi_x:\to\mathcal{F}_x\to\mathcal{G}_x$ is injective.
\end{enumerate}
\end{proposition}

\begin{proof}
Here, I put the procedure of the proof.
\[
\begin{tikzcd}
i) \arrow[d]  & iv) \arrow[d]                       \\
ii) \arrow[r] & iii) \arrow[u] \arrow[l] \arrow[lu]
\end{tikzcd}
\]
\par $i)\Rightarrow ii)$, 
\[
\begin{tikzcd}
\Ker(\varphi) \arrow[d, "\varphi_0"'] \arrow[rd, "0"] &             \\
\mathcal{F} \arrow[r, "\varphi"']                     & \mathcal{G}
\end{tikzcd}
\]
Where $\varphi_0(U)$ is an inclusion map of abelian groups.\\
\par $ii)\Leftrightarrow iii)$,
\begin{equation*}
\Ker\varphi=0\Leftrightarrow \forall U\in\mathcal{T}, \Ker\varphi(U)=0\Leftrightarrow\varphi_U\text{ is injective.}
\end{equation*}
\par $iii)\Rightarrow iv)$,
Fix $x\in X$.
\[
\begin{tikzcd}
0 \arrow[r] & \mathcal{F}(U) \arrow[r, "\varphi_U"] & \mathcal{G}(U)
\end{tikzcd}
\]
is an exact sequence as $\varphi_U$ is injective for any $U\subset X$ open. Since $\varinjlim$ is left-exact we obtain,
\[
\begin{tikzcd}
0 \arrow[r] & \mathcal{F}_x \arrow[r, "\varphi_x"] & \mathcal{G}_x
\end{tikzcd}
\]
is also an exact sequence.
\end{proof}

\begin{proposition}
Let $\varphi:\mathcal{F}\to\mathcal{G}$ be a morphism in $\Sh(X)$. Then the following are equivalent.
\begin{enumerate}[1).]
\item $\varphi$ is an epimorphism (for any $\varphi_1,\varphi_2:\mathcal{H}\to\mathcal{F}$, such that $\varphi\circ\varphi_1=\varphi\circ\varphi_2$ implies $\varphi_1=\varphi_2$).
\item $\Coker\varphi=0$.
\item For any open set $U\subset X$, 
\item  For any $x\in X$, $\Coker\varphi_x = 0$, (in other words, $\varphi_x$ is a surjection).
\end{enumerate}
\end{proposition}

\begin{proof}
Recall the definition of epimorphisms is such that $\varphi:\mathcal{F}\to\mathcal{G}$ is an epimorphism if for any morphism $\psi:\mathcal{G}\to\mathcal{G}_0$, we have,
\begin{equation*}
\psi\circ\varphi=0\Rightarrow \psi = 0.
\end{equation*}

$i)\Rightarrow iv)$.
Suppose $\varphi$ is an epimorphism, then we have
\[
\begin{tikzcd}
\mathcal{F} \arrow[d, "\varphi"'] \arrow[rd, "0"] \arrow[rrd, "0", bend left] &                                                 &               \\
\mathcal{G} \arrow[r, "\pi"] \arrow[rr, "\psi", bend right]                   & \Coker^{\mathbf{pre}}\varphi \arrow[r, "(-)^+"] & \Coker\varphi
\end{tikzcd}
\]
By the assumption $\psi = 0$.\\
\par Let $\mathcal{O}_x = \{U\in\mathcal{T}\:|\: x\in U\}$. We consider an exact sequence,
\[
\begin{tikzcd}
0 \arrow[r] & \Ker(\varphi_U) \arrow[r, hook] & \mathcal{F}(U) \arrow[r, "\varphi"] & \mathcal{G}(U) \arrow[r, "\pi"] & \Coker(\varphi_U) \arrow[r] & 0,
\end{tikzcd}
\]
for each $U\in\mathcal{O}_x$. By Proposition \ref{direct_limit_exact_functor}, 
\[
\begin{tikzcd}
0 \arrow[r] & \Ker(\varphi)_x \arrow[r, hook] & \mathcal{F}_x \arrow[r, "\varphi_x"] & \mathcal{G}_x \arrow[r, "\pi_x"] & \Coker(\varphi)_x \arrow[r] & 0
\end{tikzcd}
\]
is also exact. Thus we conclude 
\begin{equation*}
\Coker^{pre}(\varphi)_x = \Coker(\varphi_x).
\end{equation*}
And we conclude that $\varphi_x$ is surjective by the exactness of the sequence.\\
\par $iv)\Rightarrow ii)$. Assume For each $x\in X$, $\Coker(\varphi_x)=0$. By applying Proposition. \ref{unit_sheaf_morphism} to $\mathbf{id}:\mathcal{F}\to\mathcal{F}$, we obtain
\begin{equation*}
\mathcal{F}=0\Leftrightarrow \forall x\in X, \mathcal{F}_x=0.
\end{equation*}
Apply this to $\Coker\varphi$, we derive that
\begin{equation*}
\Coker\varphi = 0.
\end{equation*}
\par $iv)\Rightarrow i)$. Assume $\Coker(\varphi_x)=0$ for any $x\in X$. Consider a commutative diagram of sheaves
\[
\begin{tikzcd}
\mathcal{F} \arrow[r, "\varphi"] \arrow[rd, "0"'] & \mathcal{G} \arrow[d, "\psi"] \\
                                                  & \mathcal{G}_0                
\end{tikzcd}
\]
By assumption $\varphi_x:\mathcal{F}_x\to\mathcal{G}_x$ is a surjection. Thus $\psi_x=0$ for any $x\in X$ which is equivalent to $\psi=0$.\\
\par $ii)\Rightarrow i)$. Suppose $\Coker\varphi=0$ if and only if $\Coker(\varphi)_x=\Coker(\varphi_x)=0$ for any $x\in X$. \\
\par $iii)\Rightarrow iv)$. Assume $\varphi_U:\mathcal{F}(U)\to\mathcal{G}(U)$ is surjective for any $U\subset X$ open. By Proposition. \ref{direct_limit_exact_functor}, we conclude that 
\begin{equation*}
\varphi_x:\mathcal{F}_x\to\mathcal{G}_x
\end{equation*}
is also surjective.
\end{proof}

\begin{corollary}
Let $\varphi:\mathcal{F}\to\mathcal{G}$ be a morphism of sheaves. Then the following statements are equivalent.
\begin{enumerate}[1).]
\item $\varphi$ is an isomorphism.
\item For all $x\in X$, $\varphi_x$ is an isomorphism. 
\end{enumerate}
\end{corollary}

\begin{proof}
%missing proof
\end{proof}

\subsection{Exact Sequences of Sheaves}

\begin{definition}
A sequence
\[
\begin{tikzcd}
\mathcal{F}\arrow[r,"\varphi"]&\mathcal{G}\arrow[r,"\psi"]&\mathcal{H}
\end{tikzcd}
\]
of sheaves with morphisms $\varphi,\psi$ of sheaves is said to be exact at $\mathcal{G}$ if
\begin{equation*}
\Image\varphi=\Ker\psi.
\end{equation*}
\end{definition}

\begin{definition}
A short exact sequence of sheaves is a sequence
\[
\begin{tikzcd}
0\arrow[r]&\mathcal{F}\arrow[r,"\varphi"]&\mathcal{G}\arrow[r,"\psi"]&\mathcal{H}\arrow[r]&0
\end{tikzcd}
\]
which is exact at all terms. In other words,
\begin{enumerate}[i).]
\item $\varphi$ is injective,
\item $\psi$ is surjective,
\item $\Image\varphi=\Ker\psi$.
\end{enumerate}
\end{definition}

\begin{proposition}
Given a exact sequence
\[
\begin{tikzcd}
0\arrow[r]&\mathcal{F}\arrow[r,"\varphi"]&\mathcal{G}\arrow[r,"\psi"]&\mathcal{H},
\end{tikzcd}
\]
of sheaves on a topological space $X$. Then for each open set $U\subseteq X$, we derive an exact sequence of abelian groups
\[
\begin{tikzcd}
0\arrow[r]&\mathcal{F}(U)\arrow[r,"\varphi"]&\mathcal{G}(U)\arrow[r,"\psi"]&\mathcal{H}(U),
\end{tikzcd}
\]
\end{proposition}

\begin{proof}
%missing proof
\end{proof}

\begin{corollary}
Taking stalks in $\Sh_{(\mathbf{Ab})}(X)$ is an exact functor.
%Revise the statement
\end{corollary}

\begin{theorem}
The category of sheaves of abelian groups is an abelian category.
%Check the definition of abelian categories.
\end{theorem}

\subsection{Direct Image Functors}

\begin{definition}
Let $(X,\mathcal{T}_X),(Y,\mathcal{T}_Y)$ be topological spaces and $f:X\to Y$ be a continuous map. The direct image functor is the functor $f_*:\Sh(X)\to\Sh(Y)$ such that,
\begin{equation*}
\mathcal{F}\in\Sh(X), U\in \mathcal{T}_Y \{\quad f_*\mathcal{F}(U) = \mathcal{F}(f^{-1}(U))
\end{equation*}
\end{definition}

\begin{proposition}
Such $f_*\mathcal{F}$ is indeed a sheaf.
\end{proposition}

\begin{proof}
%missing proof
\end{proof}

\begin{definition}
Let $f_*:\Sh(X)\to\Sh(Y)$ be a direct image functor. Given a morphism of sheaves, $\varphi:\mathcal{F}\to\mathcal{G}$ in $\Sh(X)$. For an open set $U\in Y$, the image of $\varphi$ under $f_*$ is 
\begin{equation*}
(f_*\varphi)_U = \varphi_{f^{-1}(U)}:f_*\mathcal{F}(U)\to f_*\mathcal{G}(U).
\end{equation*}
\end{definition}

\begin{definition}
Let $(X,\mathcal{T}_X),(Y,\mathcal{T}_Y)$ be topological spaces and $f:X\to Y$ be a continuous map. The inverse image functor 
\begin{equation*}
f^{-1}:\Sh(Y)\to\Sh(X)
\end{equation*}
is defined as follow.\\
\par For a sheaf $\mathcal{G}\in\Sh(Y)$, we set $f^{-1}\mathcal{G}$ to be the sheafification of the presheaf
\begin{equation*}
V\in\mathcal{T}_X,\quad f^{-1}\mathcal{G}(V) = \varinjlim_{U\in\mathcal{O}_V}\mathcal{G}(U),
\end{equation*}
where $\mathcal{O}_V = \{U\in\mathcal{T}_X\:|\: V\subseteq U\}$.
%Define the restriction map if possible in explicit form, also the image of morphisms of sheaves using the universal property of the sheafification.
\end{definition}

\begin{definition}
Let $(X,\mathcal{T}_X),(Y,\mathcal{T}_Y)$ be topological spaces and $f:X\to Y$ be a continuous map. For a sheaf $\mathcal{F}\in\Sh(X)$ and a point $y\in Y$, we define the stalk of $f_*\mathcal{F}$ at $y$ as
\begin{equation*}
(f_*\mathcal{F})_y = \varinjlim_{U\in\mathcal{O}_y}\mathcal{F}(f^{-1}(U)).
\end{equation*}
\end{definition}

\begin{proposition}
Let $(X,\mathcal{T}_X),(Y,\mathcal{T}_Y)$ be topological spaces and $f:X\to Y$ be a continuous map. For $\mathcal{F}\in\Sh(Y),x\in X$, there exists an isomorphism such that 
\begin{equation*}
(f^{-1}\mathcal{F})_x \cong \mathcal{F}_{f(x)}.
\end{equation*}
%Check the statement and the exercise 11.
\end{proposition}

\begin{example}
Given a topological space $X$ and a single point set $\{y\}$. A unique map $f:X\to \{y\}$ is continuous. We know that 
\begin{equation*}
\Sh(\{y\}) = (\mathbf{Ab}).
\end{equation*}
Thus the direct image functor $f_*$ and $\mathcal{F}\in\Sh(\{y\})$, we have
\begin{equation*}
f_*\mathcal{F} =  \mathcal{F}(X)\in(\mathbf{Ab}).
\end{equation*}
\end{example}

\begin{example}
Given a topological space $X$ and a single point set $\{y\}$ and a unique continuous map $f:X\to \{y\}$. We have for $G\in\Sh(\{y\}) = (\mathbf{Ab})$, 
\begin{equation*}
f^{-1}G = G.
\end{equation*}
\end{example}

\begin{example}
Given a topological space $X$ and a single point set $\{y\}$ and a continuous map $f: \{y\}\to X$. We have for $G\in\Sh(\{y\}) = (\mathbf{Ab})$, 
\begin{equation*}
f_*G(U) = 
\begin{cases}
G\quad (f(y)\in U),\\
0\quad (f(y)\not\in U).
\end{cases}
\end{equation*}
\end{example}

\begin{example}
Given a topological space $X$ and a single point set $\{y\}$ and a continuous map $f: \{y\}\to X$. For $\mathcal{F}\in\Sh(X)$,
\begin{equation*}
f^{-1}\mathcal{F}(\{y\}) = \mathcal{F}_f(y).
\end{equation*}
\end{example}

\begin{lemma}
Given a topological spaces $X$ and $Y$, $f:X\to Y$ a continuous function. The inverse image functor $f^{-1}$ is exact. 
\end{lemma}

\begin{lemma}
Given a topological spaces $X$ and $Y$, $f$ a continuous function. The direct image functor $f_*$ is (only) left-exact.
\end{lemma}

\begin{lemma}
Given a topological spaces $X$ and $Y$, $f$ a continuous function. We have seen that $f_*$ induces a group homomorphism between $\Hom(\mathcal{F},\mathcal{G})$ and $\Hom(f_*\mathcal{F},f_*\mathcal{G})$. Allowing the abuse of notation, we denote this homomorphism by 
\begin{equation*}
f_*:\Hom(\mathcal{F},\mathcal{G})\to\Hom(f_*\mathcal{F},f_*\mathcal{G}).
\end{equation*}
For such homomorphism we have
\begin{equation*}
f_*(\mathcal{F}\oplus\mathcal{G}) \cong f_*\mathcal{F}\oplus f_*\mathcal{G}.
\end{equation*}
\end{lemma}

\section{Cohomology of Sheaves}

\subsection{Basics of Cohomology}

%Consider putting some basic of cohomology in other sections

\begin{example}
Sheaf of holomorphic functions.
\end{example}

\subsection{$\delta$-Functors}

\begin{definition}
Let $\mathcal{A},\mathcal{B}$ be categories. A $\delta$=functor from $\mathcal{A}\to\mathcal{B}$ consist of additive functors
\begin{equation*}
H^i:\mathcal{A}\to\mathcal{B}\quad (i=0,1,\cdots),
\end{equation*}
such that for any short exact sequence
\[
\begin{tikzcd}
0\arrow[r]&A_1\arrow[r]&A_2\arrow[r]&A_3\arrow[r]&0
\end{tikzcd}
\]
in $\mathcal{A}$, we have mapping
\begin{equation*}
\delta^i:H^i(A_3)\to H^{i+1}(A_1),
\end{equation*}
which make the sequence
\[
\begin{tikzcd}
0 \arrow[r] & H_0(A_1) \arrow[r] & H_0(A_2) \arrow[r]             & H_0(A_3) \arrow[r, "\delta^0"] & H_1(A_1) \arrow[r] & \cdots \\
            & \cdots \arrow[r]   & H_i(A_3) \arrow[r, "\delta^i"] & H_{i+1}(A_1) \arrow[r]         & \cdots             &       
\end{tikzcd}
\]
a long exact sequence.\\
\par Furthermore, given a commutative diagram,
\[
\begin{tikzcd}
0 \arrow[r] & A_1 \arrow[r] \arrow[d] & A_2 \arrow[r] \arrow[d] & A_3 \arrow[r] \arrow[d] & 0 \\
0 \arrow[r] & B_1 \arrow[r]           & B_2 \arrow[r]           & B_3 \arrow[r]           & 0
\end{tikzcd}
\]
we get a commutative diagram
\[
\begin{tikzcd}
\cdots \arrow[r] & H^i(A_1) \arrow[r] \arrow[d] & H^i(A_2) \arrow[r] \arrow[d] & H^i(A_3) \arrow[r] \arrow[d] & \cdots \\
\cdots \arrow[r] & H^i(B_1) \arrow[r]           & H^i(B_2) \arrow[r]           & H^i(B_3) \arrow[r]           & \cdots
\end{tikzcd}
\]
\end{definition}

\begin{definition}
A $\delta$-functor $(H^i:\mathcal{A}\to\mathcal{B},\delta^i)_i$ is universal if for any other $\delta$-functor $(\tilde{H}^i:\mathcal{A}\to\mathcal{B},\tilde{\delta}^i)_i$ together with a morphism 
\end{definition}

\section{Scheme Theory}

\subsection{Ringed Spaces}

\begin{definition}
Let $(X,\mathcal{T})$ be a topological space. A ringed space is a sheaf $\mathcal{O}_X$ of rings on $X$. 
\end{definition}

\begin{definition}
A morphism of ringed spaces between $(X,\mathcal{O}_X),(Y,\mathcal{O}_Y)$ is a tuple $(f,f^{\#})$ where $f:X\to Y$ is a continuous map and $f:\mathcal{O}_Y\to f_*\mathcal{O}_X$ is a morphism of sheaves of rings. 
\end{definition}

\begin{example}
Let $(X,\mathcal{T})$ be a topological space. The sheaf of continuous functions $\mathcal{C}_X$ is a ringed space and any continuous map $f:X\to Y$ defines a morphism of ringed spaces.

\end{example}
\begin{example}
Let $X$ is a differentiable manifold then the differentiable functions $\mathcal{C}^{\mathbf{diff}}_X$ is a ringed space. A morphism of ringed spaces $f:X\to Y$, for this case must satisfy the following condition.
%later
\end{example}

\begin{example}
Let $X\subseteq\mathbb{C}^n$ be open subset. A sheaf of holomorphic functions $\mathcal{O}_X$ over $X$ is a ringed space. And a morphism of such ringed spaces must be a holomorphic functions
\end{example}

\begin{example}
Given the Zariski topology on $X=k^n$ and the sheaf $\mathcal{O}_X(U) = \{f:U\to k\:|\: f$ is regular $\}$, $(X,\mathcal{O}_X)$ is a ringed space.
\end{example}

\begin{definition}
By Remark \ref{reg_cont_inc}, the sheaf of regular functions $\mathcal{O}_X$ is contained in the sheaf of continuous functions $\mathcal{C}_X$. Given two Zariski topologies $X,Y$, and a continuous function $f:X\to Y$, $f$ is said to be regular if 
for any regular function $g:U\to k$ for an open set $U\subseteq Y$, $g\circ f:f^{-1}(U)\to k$ is also regular. In other words, $f$ is said to be regular if it defines a morphism of ringed spaces between two ringed spaces of regular functions. 
\end{definition}

\begin{definition}
A locally ringed space is a ringed space $(X,\mathcal{O}_X)$ such that for any $x\in X$, the stalk $\mathcal{O}_{X,x}$ is a local ring.
\end{definition}

\begin{example}
A sheaf of continuous functions on a topological space $X$ is a locally ringed space. Indeed, for each $x\in X$ and the stalk $\mathcal{C}_{X,x}$, the ideal 
\begin{equation*}
\mathfrak{m}_x = \{(f:U\to\mathbb{R},U)\:|\: f(x)=0\}
\end{equation*}
is a unique maximal ideal. In order to prove this, we recall that an ideal $\mathfrak{m}$ is a unique maximal ideal if any element not in $\mathfrak{m}$ is a unit.\\
\par For each $(f:U\to\mathbb{R},U)\in\mathcal{C}_{X,x}$, $f(x)\not=0$ implies that there exists a neighborhood $V\subset U$ such that $f(x)\not=0$ for any $x\in V$. Thus $(f|_V:V\to\mathbb{R},V)$ is invertible, therefore a unit.
\end{example}

\begin{example}
In similar manner, the following are also locally ringed spaces.
\begin{enumerate}
\item $X$ is a differentiable manifold and $(X,\mathcal{C}^{\mathbf{diff}}_X)$.
\item $X\subseteq \mathbb{C}^n$ be an open set, and $(X,\mathcal{O}_X)$ be a sheaf of holomorphic functions.
\item A sheaf of regular functions on $X=k^n$. 
\end{enumerate}
\end{example}

\begin{definition}
A morphism $(f,f^{\#}):(X,\mathcal{O}_X\to(Y,\mathcal{O}_Y)$ between ringed spaces is a morphism of locally ringed space if $f^{\#}$ is local as a ring homomorphism. 
\end{definition}

\begin{example}
Let $A$ be a commutative ring and consider the Zariski topology on $X=\Spec(A)$ and the structure sheaf $(X,\mathcal{O}_X)$. We have proven that 
\begin{equation*}
\mathfrak{O}_{X,\mathfrak{p}}\cong A_{\mathfrak{p}}.
\end{equation*}
Therefore, $(X,\mathcal{O}_X)$ is a locally ringed space and for any ring homomorphism $\phi:A\to B$, it induces a morphism of locally ringed spaces $(f,f^{\#}):(\Spec(B),\mathcal{O}_{\Spec(B)})\to(\Spec(A),\mathcal{O}_{\Spec(A)})$ such that
\begin{equation*}
\mathfrak{q}\in\Spec(B), f(\mathfrak{q}) = \phi^{-1}(\mathfrak{q})\in\Spec(A).
\end{equation*}
This is indeed a morphism of locally ringed spaces. 
%later
\end{example}

\begin{proposition}
Let $A,B$ be commutative rings. Then the map $\phi\mapsto(f,f^{\#})$ is a bijection between
\begin{equation*}
\Hom(A,B)\leftrightarrow \Hom_{\mathbf{loc}}(\Spec(B),\mathcal{O}_{\Spec(B)}),(\Spec(A),\mathcal{O}_{\Spec(A)}))
\end{equation*}
\end{proposition}

\begin{proof}
%later
\end{proof}

\begin{definition}
A category of ringed spaces is denoted by $(\mathbf{Ringed Spaces})$ with morphisms $(f,f^{\#})$ morphisms of ringed spaces. 
\end{definition}

\begin{definition}
A category of ringed spaces is denoted by $(\mathbf{Ringed Spaces})$ with morphisms $(f,f^{\#})$ morphisms of locally ringed spaces. 
\end{definition}

\begin{remark}
A composition of two morphisms locally ringed space is indeed a morphism of locally ringed spaces thus the above construction is justified.%later
\end{remark}

\begin{definition}
Two locally ringed spaces $(X,\mathcal{O}_X)$ and $(Y,\mathcal{O}_Y)$ are isomorphic if there exists morphisms $(f,f^{\#}):(X,\mathcal{O}_X)\to(Y,\mathcal{O}_Y)$ and $(g,g^{\#}):(Y,\mathcal{O}_Y)\to(X,\mathcal{O}_X)$ such that $f$ and $g$ are inverses of each other. (ie. there exists a morphism of locally ringed spaces $(f,f^{\#})$ where $f$ is a homeomorphism).%later
\end{definition}

\begin{example}(A morphism of locally ringed spaces induced by homeomorphism but not an isomorphism of locally ringed spaces).\\
\par Let $X=\mathbb{R}^n$ and consider the sheaf of continuous functionals $\mathcal{C}_X$ and the sheaf of smooth functionals $\mathcal{C}^{\mathbf{diff}}_X$. Furthermore, we consider $f=id_X$ then $f^{\#}$ is an inclusion as smooth functions are continuous. 
However, $(f,f^{\#})$ is not an isomorphism of locally ringed spaces.
\end{example}

\begin{example}
Let us consider $X=\mathbb{C}^n$ and the sheaf of holomorphic functions $\mathcal{O}$ on $X$ and the structure sheaf $\mathcal{O}_X$. Then consider the morphism of locally ringed spaces $(f,f^{\#})$ by the identity map. However, $f$ is not continuous as the topology defined on the image is the Zariski topology.
\end{example}

\begin{definition}
Let $X=\mathbb{C}^n$ and $Y=\MaxSpec(\mathbb{C}[x_1,\cdots,x_n])$. Let $f:X\to Y$ be such that
\begin{equation*}
f(z_1,\cdots,z_n) = (x_1-z_1,\cdots,x_n-z_n).
\end{equation*}
This is a bijection. Furthermore, $f$ is continuous because polynomials are continuous functions. \\%later.
\par We define $f^{\#}$ to be 
\end{definition}

\subsection{Schemes}

\begin{definition}
An affine scheme is a locally ringed space $(X,\mathcal{O}_X)$ which is isomorphic to a structure sheaf $(\Spec(A),\mathcal{O}_{\Spec(A)})$ for some commutative ring $A$. %later
\end{definition}

\begin{example}
We consider the Zariski topology on $\Spec(\mathbb{Z})$ and a sheaf $\mathcal{O}$ such that
\begin{equation*}
\mathcal{O}(D(\mathfrak{a})) = \mathbb{Z}_{\mathfrak{a}}.
\end{equation*}
is an affine scheme.
\end{example}

\begin{example}
Let $k$ be a field. Then $\Spec(k)$ is  a single point set. And we consider the sheaf $\mathcal{O}$ such that $\mathcal{O}(\Spec(k))=k$. 
\label{field_spec}
\end{example}

\begin{definition}For a field $A$ be a commutative ring and $n$ a natural number, we define
\begin{equation*}
\mathbb{A}^n_A=(\Spec(A[x_1,\cdots,x_n]),\mathcal{O}).
\end{equation*}
%later
\end{definition}

\begin{example}
Let $A$ be a discrete valuation ring in other words $k[t]_{(t)}$. 
%later
\end{example}

\begin{example}
Let $k$ be a field and $A=k[x]/(x^2)$. Then $\Spec(A)=\{(x)\}$. Thus a single point set. However, this is not isomorphic to $(\Spec(k),\mathcal{O})$ introduced in Example \ref{field_spec}.
\end{example}

\begin{definition}
A scheme is a ringed space $(X,\mathcal{O}_X)$ which is locally isomorphic t an affine scheme. In other words, for any $x\in X$, there is a neighborhood $U$ of $X$ such that there exists a commutative ring $A$ and $(U,\mathcal{O}|_U)$ is isomorphic to $(\Spec(A), \mathcal{O}_{\Spec(A)})$.
\end{definition}

\begin{definition}
A category of affine schemes is $(\mathbf{AffSch})$ where
\begin{enumerate}[i).]
\item $\mathbf{ob}(\mathbf{AffSch}) = \{(\Spec(A),\mathcal{O}_{\Spec(A)})\:|\: A$ is a commutative ring and $\mathcal{O}_{\Spec(A)}$ is a structure sheaf$\}$.
\item $(\mathbf{AffSch})((\Spec(A),\mathcal{O}_{\Spec(A)}),(\Spec(B),\mathcal{O}_{\Spec(B)})) =\{$ morphisms of locally ringed spaces$\}$.
\end{enumerate}
\end{definition}

\begin{definition}
A category of schemes is $(\mathbf{Sch})$ where 
\begin{enumerate}[i).]
\item $\mathbf{ob}(\mathbf{Sch}) = \{(X,\mathcal{O}_X)\:|\: Schemes\}$.
\item $(\mathbf{AffSch})((X,\mathcal{O}_X),(Y,\mathcal{O}_Y)) =\{$ morphisms of locally ringed spaces$\}$.
\end{enumerate}
\end{definition}


\begin{remark}
We have the inclusion relations
\begin{equation*}
(\mathbf{AffSch})\subset(\mathbf{Sch})\subset(\mathbf{Locally Ringed Spaces})
\end{equation*}
which are all fullsubcategories however, 
\begin{equation*}
(\mathbf{Locally Ringed Spaces})\subset(\mathbf{Ringed Spaces})
\end{equation*}
is not a full subcategory
\end{remark}

\subsection{Connection with Classical Algebraic Geometry}

\begin{proposition}
Let $X$ be an affine variety. The regular functions $\mathcal{O}_X(U)$ 
\begin{equation*}
\mathcal{O}_X(U) = \{h:U\to k\:|\: h\text{ is a regular function.}\}.
\end{equation*}
defined on open subset $U$ of $X$ form a sheaf. Furthermore, it is a locally ringed space.
\end{proposition}

\begin{proof}
%later
\end{proof}

\begin{proposition}
Let $X$ be an affine variety and $Y=A(X)$ be a coordinate ring. Let us consider the sheaf of regular functions $(X,\mathcal{O}_X)$ and an affine scheme $(Y,\mathcal{O}_Y)$. There exists a natural morphism of locally ringed spaces $(f,f^{\#}):(X,\mathcal{O}_X)\to(Y,\mathcal{O}_Y)$.
\end{proposition}

\begin{proof}
Notice that we have the following isomorphisms.
\begin{equation*}
X\cong\MaxSpec(A(X)),\quad k^n\cong\MaxSpec(k[x_1,\cdots,x_n]).
\end{equation*}
For any maximal ideal $\mathfrak{m}\subset k[x_1,\cdots,x_n]$,
\begin{equation*}
I(X)\subseteq\mathfrak{m}=(x_1-a_1,\cdots,x_n-a_n)\Leftrightarrow \forall f\in I(X), f(a_1,\cdots,a_n)=0.
\end{equation*}
Let $\pi:Y\to X$ to be the canonical map by $I(X)$, then the map $f:X\to Y, (\mathfrak{m}) = \pi^{-1}(\mathfrak{m})$ is an inclusion. Then $f$ is continuous.\\%later
\par Let us define $f^{\#}:\mathcal{O}_Y\to f_*(\mathcal{O}_X)$. For an open set $U\subseteq Y$, we have
\begin{equation*}
(s:U\to\coprod_{\mathfrak{p}\in U}A(x)_{\mathfrak{p}})\mapsto(s:U\to\coprod_{\mathfrak{m}\in U\cap\MaxSpec A(x)}A(x)_{\mathfrak{m}}).
\end{equation*}
By Lemma \ref{k_algebra_localization} and applying canonical maps $\pi_{\mathfrak{m}}:A(X)_{\mathfrak{m}}\to A(X)_{\mathfrak{m}}/\mathfrak{m}A(X)_{\mathfrak{m}}$ locally, we get
\begin{equation*}
s:U\to\coprod_{\mathfrak{m}\in U\cap\MaxSpec A(x)}\to\coprod_{\mathfrak{m}\in U\cap\MaxSpec A(x)}A(X)_{\mathfrak{m}}/\mathfrak{m}A(X)_{\mathfrak{m}} = k.
\end{equation*}
Thus we obtained a map $s:U\to k$. Locally, we have
\begin{equation*}
s = {\frac {g_1+I(X)} {g_2+I(X)}},
\end{equation*}
for $g_1+I(X),g_2+I(X)\in A(X)$. We conclude, locally
\begin{equation*}
t = {\frac {g_1} {g_2}}. %later check the welldefined ness of this expression.
\end{equation*}

We now claim that $\ringedspacemorph{f}$ is a local morphism of ringed spaces. By the correspondence of a maximal ideal $\mathfrak{m}$ of $k[x_1,\cdots,x_n]$ and a point $(a_1,\cdots,a_n)$, we have the isomorphism
\begin{equation*}
\mathcal{O}_{X,\mathfrak{m}}\stackrel{\sim}{\to}\mathcal{O}_{Y,\mathfrak{m}}=\localization{A(X)}{m}. %later  confirm that the germ of s is equal to the quotient polynomial which is locally equal to s in the structure sheaf.
\end{equation*}
%later finish the proof.
\end{proof}

\begin{remark}
Since $X$ is an algebraic variety, there is a prime ideal $\mathfrak{p}$ of $k[x_1,\cdots,x_n]$ such that
\begin{equation*}
X=V(\mathfrak{p}).
\end{equation*}
Let us define $\sheaf{Y'}{O}=(\Spec(k[\multivar{x}{n}]),\mathcal{O})$, where $I(X)=\mathfrak{a}$. Since $k$ is field, $k[\multivar{x},{n}]$ is Noetherian, thus the primary decomposition exists for any ideal. Thus there is a bijection between
\begin{equation*}
\Spec(k[\multivar{x}{n}]/\mathfrak{a}) \leftrightarrow \Spec(A(X)).
\end{equation*}
%Examine what reduced schemes are
\end{remark}

\begin{example}
Let $K$ be any field and $A=k[x]/(x^2)$. $A$ is called the ring of dual numbers. Observe that
\begin{equation*}
\sheaf{\Spec k}{O},\sheaf{\Spec A}{O},
\end{equation*}
both consist of single points. Let us define $\ringedspacemorph{f}:\sheaf{\Spec k}{O}\to\sheaf{\Spec A}{O}$. By the previous observation, the function $f:\Spec A\to \Spec k$ is unique map sending the unique point to the unique point. 
\end{example}

\subsection{Properties of Schemes}

\begin{theorem}[Topological properties of schemes]
\label{topological_properties_schemes}
\end{theorem}

\begin{definition}
A scheme is said to be locally Noetherian if there exists an open cover $(U_i)_{i\in I}$ such that for each $i\in I$,
\begin{equation}
U_i\cong \Spec(A_i)
\label{quasi_compact_affine_set}
\end{equation}
for some Noetherian ring $A_i$. 
\end{definition}

\begin{lemma}
Let $A,B$ be rings and $\varphi:A\to B$ be a ring homomorphism. Let $a\in A$ and $b=\varphi(a)$, then we have
\begin{equation*}
\Spec(A_a)=\Spec(B_b)
\end{equation*}
as sets.
\label{bijection_localization_spec}
\end{lemma}

\begin{proof}
Let $\mathfrak{q}\subset B$ be a prime ideal not containing $b$ and $\mathfrak{p}\subset A$ be a contraction of $\mathfrak{q}$ by $\varphi$. $\varphi^{-1}$ is the inclusion from $\Spec(B)$ to $\Spec(A)$. Also we have
\begin{equation*}
\Spec(A_a)\cong D_A(a)\subset\Spec(A) %Check AM for this isomorphism.
\end{equation*}
for an arbitrary ring and an element. And by $\varphi^{-1}$ we have
\begin{equation*}
D_B(b)\subset D_A(a).
\end{equation*}
Thus we have an inclusion
\begin{equation*}
\Spec(B_b)\subset\Spec(A_a).
\end{equation*}
%The other direction later
\end{proof}

\begin{proposition}
Let $A,B$ be rings and $\varphi:A\to B$ be a ring homomorphism. Let $a\in A$ and $b=\varphi(a)$, then we have
\begin{equation*}
\Spec(A_a)=\Spec(B_b)
\end{equation*}
as affine schemes.
\label{localization_scheme_isomorphism}
\end{proposition}

\begin{proof}
By Lemma \ref{bijection_localization_spec}, they are equal as sets. Since $\Spec(B)$ is open in $\Spec(A)$. %Check
Using the definition of structure sheaves, we have
\begin{equation*}
\mathcal{O}_{\Spec(A)}|_{\Spec(B)}=\mathcal{O}_{\Spec(B)}.
\end{equation*}
Therefore, by the lemma we have
\begin{equation*}
\mathcal{O}_{\Spec(A_a)}=\mathcal{O}_{\Spec(B_b)}.
\end{equation*}
%later
\end{proof}

\begin{lemma}
A scheme $(X,\mathcal{O}_X)$ is locally Noetherian if and only if for any open affine set $U\subset X, U=\Spec(A)$ for some Noetherian ring $A$.
\end{lemma}

\begin{proof}By definition, $\Leftarrow$ is trivially true. We will prove $\Rightarrow$ direction.\\
\par Let $X=\bigcup_{i\in I}\Spec(A_i)$ be an open affine Noetherian covering of $X$ and $U=\Spec(A)$ be an open affine set. Let us define an open covering of $U$ by 
\begin{equation*}
U_i=U\cap\Spec(A_i), \quad U=\bigcup_{i\in I}U_i.
\end{equation*}
%Check which proposition tells quasi-compactness
By Theorem \ref{topological_properties_schemes} and the assumption on $U$, $U$ is quasi-compact. By arranging $I$, there exists a large enough $n\in\mathbb{N}$ such that
\begin{equation*}
U=\bigcup_{i=1}^n U_{i}.
\end{equation*}
Since each $i=1,\cdots,n$, $U_{i}$ is open in $\Spec(A_{i}$, thus there is $\{a_{ij}\}_{j=1\cdots,n_i}\subset A_{i}$ such that 
%Why this holds? localization?
\begin{equation*}
U_{i} = \bigcup_{j=1}^{n_i}\Spec(A_{i,a_{ij}}).
\end{equation*}
Thus substituting this to \eqref{quasi_compact_affine_set}, we get
\begin{equation*}
U = \bigcup_{i=1}^n \bigcup_{j=1}^{n_i}\Spec(A_{i,a_{ij}}).
\end{equation*}
Again by the quasi-compactness of $U$, we conclude finitely many $A_{i,a_{ij}}$ cover $U$.\\
%later \par Let us now fix $B+A_{i,a{ij}}$ for some $i,j$. Then $\Spec(B) \subset\Spec (A)$ is an open subset. This can be verified by the existence of $a\in A$ such that %Why spec is open subset.
\par Since $A_i$ is Noetherian for each $i\in I$, this means that any localization of it is also Noetherian. Thus we $\{\Spec(A_{i,a_{ij}})$ is an open Noetherian covering of $U$. By rearranging $\{a_{ij}\}$, we let $\{a_1,\cdots,a_n\}$ to be the elements which spectrums of their localizations cover $U$. We then show that
\begin{equation*}
\mathfrak{a}=\bigcap_{i=1}^n\pi_i^{-1}(\pi_i(\mathfrak{a})A_{a_i}).
\label{contraction_ideal_intersection}
\end{equation*}
where $\pi_i:A\to A_{a_i}$ is the canonical inclusion for each $i=1,\cdots,n$. \\
\par $\mathfrak{a}\subseteq\bigcap_{i=1}^n\pi_i^{-1}(\pi_i(\mathfrak{a})A_{a_i})$ is trivial, thus we prove $\mathfrak{a}\supset\bigcap_{i=1}^n\pi_i^{-1}(\pi_i(\mathfrak{a})A_{a_i})$. Let $b\in\bigcap_{i=1}^n\pi_i^{-1}(\pi_i(\mathfrak{a})A_{a_i})$ be arbitrary. By definition, for each $i=1,\cdots,n$, there exists $b_i\in\mathfrak{a}$ and $n_i$ such that
\begin{equation*}
\pi_i(b) = {\frac {b_i} {a_i^{n_i}}}.
\end{equation*}
Using that $\mathfrak{a}$ is an ideal, we derive that for big enough $N$, we have
\begin{equation*}
\pi_i(b) = {\frac {b_i} {a_i^{N}}}.
\end{equation*}
Using the definition of localization, for each $i=1,\cdots,n$, there is $m_i$ such that
\begin{equation*}
(b_i-a_i^Nb)a_i^{m_i}=0.
\end{equation*}
Taking large enough $M$, for each $i=1,\cdots,n$, we derive
\begin{equation*}
(b_i-a_i^Nb)a_i^{M}=0.
\end{equation*}
Thus for all $i=1,\cdots,n$, we know
\begin{equation}
a_i^{N+M}b\in\mathfrak{a}.
\label{exponent_ideal_product}
\end{equation}
Since $\{D_A(a_i)\}_{i=1,\cdots,n}$ covers $\Spec A$, we have
\begin{equation*}
\bigcap_{i=1}^n V(a_i)=\emptyset\Leftrightarrow V((a_1,\cdots,a_n))=\emptyset\Leftrightarrow(a_1,\cdots,a_n) = (1).
\end{equation*}
Therefore, for any $k\in\mathbb{N}_0$ we have $(a_1^k,\cdots,a_n^k)=(1)$. By Equation \eqref{exponent_ideal_product}, we derive that for some $c_1,\cdots,c_n\in A$, %check why this exponent argument holds.
\begin{equation*}
b=\sum_{i=1}^n c_ia_i^k\in\mathfrak{a}.
\end{equation*}
Finally, we prove that $A$ is Noetherian. Given an ascending chain of ideal
\begin{equation*}
\mathfrak{a}_1\subset\mathfrak{a}_2\subset\cdots.
\end{equation*}
We get an ascending chain of extended ideals
\begin{equation*}
\pi(\mathfrak{a}_1)A_{a_i}\subset\pi(\mathfrak{a}_2)A_{a_i}\subset\cdots,
\end{equation*}
for each $i=1,\cdots,n$. Since each $A_{a_i}$ is Noetherian, we conclude that there is large enough $N$ such that
\begin{equation*}
\pi_i(\mathfrak{a}_N)A_{a_i}=\pi_i(\mathfrak{a}_{N+1})A_{a_i}
\end{equation*}
for each $i=1,\cdots,n$. By Equation \eqref{contraction_ideal_intersection}, we conclude that
\begin{equation*}
\mathfrak{a}_N=\bigcap_{i=1}^n\pi_i^{-1}(\pi_i(\mathfrak{a}_N)A_{a_i})=\bigcap_{i=1}^n\pi_i^{-1}(\pi_i(\mathfrak{a}_{N+1})A_{a_i})=\mathfrak{a}_{N+1}.
\end{equation*}
\end{proof}

\begin{corollary}
An affine scheme $(\Spec A,\mathcal{O}_{\Spec A})$ is a Noetherian scheme, then $A$ is Noetherian.
\end{corollary}

\begin{remark}
A Sheaf is noetherian then its base space is Noetherian as topological space. The converse is not true.
\end{remark}

\begin{definition}
A scheme $(X,\mathcal{O}_X)$ is said to be reduced if for any open subset $U\subseteq X$, $\mathcal{O}_X(U)$ is a reduced ring.
\end{definition}

\begin{proposition}
A scheme $(X,\mathcal{O}_X)$ is reduced if and only if for any $x\in X$, the stalk $\mathcal{O}_{X,x}$ is a reduced ring.
\end{proposition}

\begin{proof}
%later
\end{proof}

\begin{definition}
A scheme is integral if every section of it is an integral domain.
\end{definition}

\begin{proposition}
A scheme $(X,\mathcal{O}_X)$ is reduced then for any $x\in X$, the stalk $\mathcal{O}_{X,x}$ is an integral domain.
\end{proposition}

\begin{proof}
%later
\end{proof}

\begin{remark}
The converse is not true.\\
\par Let $k$ be a field and $R$ be a $k$-algebra. %later
\end{remark}

\begin{remark}
By the definition of reduced rings, it is obvious that integral schemes are reduced.
\end{remark}

\begin{example}
An affine scheme on a field $k$ is integral.%later
\end{example}

\begin{example}
Let $k$ be a field. $(\Spec k[x]/(x^2),\mathcal{O}_{\Spec k[x]/(x^2)})$ is neither integral nor reduced.%later
\end{example}

\begin{example}
Let $k$ be a field. $(\Spec k[x,y]/(x,y),\mathcal{O}_{\Spec k[x,y]/(x,y)})$ is reduced but not integral. %later
\end{example}

\begin{lemma}
Let $(X,\mathcal{O}_X)$ is a scheme and fix $s\in\mathcal{O}_X(U)$ for some open set $U$. For each $x\in U$, define $\mathfrak{m}_x$ to be a unique maximal ideal in the stalk. Then the set
\begin{equation*}
F=\{x\in U\:|\: s\in\mathfrak{m}_x\}
\end{equation*}
is a closed subset of $X$.
\label{closed_subset_local_ring}
\end{lemma}

\begin{proof}
First, let us assume that $U=\Spec(A)$ for some ring $A$. We will prove that $T^c$ is open%later.
\end{proof}

\begin{lemma}
A scheme $(X,\mathcal{O}_X)$ is integral if and only if it is a reduced scheme on an irreducible topological space. 
\end{lemma}

\begin{proof}
Since integral schemes are reduced. We first prove that $X$ is not irreducible then $(X,\mathcal{O}_X)$ is not integral.\\
\par Since $X$ is not irreducible, there is non-empty disjoint open subsets $U_1,U_2$ of $X$. Then %Check the definition and equivalent definitions of irreducible spaces.
\begin{equation*}
\mathcal{O}_X(U_1\cup U_2) \cong\mathcal{O}_X(U_1)\times\mathcal{O}_X(U_2).
\end{equation*}
Therefore, this is not an integral domain. \\
\par Suppose $X$ is irreducible and $(X,\mathcal{O}_X)$ is reduced. Given an arbitrary open set $U\subset X$, and $s_1,s_2\in\mathcal{O}_X(U)$, we will show that
\begin{equation*}
s_1s_2=0\Rightarrow s_1=0\lor s_2=0.
\end{equation*}
By Lemma \ref{closed_subset_local_ring}, 
\begin{equation*}
X_1 = \{x\in U\:|\: s_1\in\mathfrak{m}_x\},\quad X_2 = \{x\in U\:|\: s_2\in\mathfrak{m}_x\},
\end{equation*}
are closed subsets.\\
\par By the sheaf property, we have $s_1s_2=0$ implies for all $x\in U$, 
\begin{equation*}
(s_1s_2)_x=s_{1,x}s_{2,x}=0.
\end{equation*}
Since each $\mathfrak{m}_x$ is prime and $s_{1,x}s_{2,x}=0\in\mathfrak{m}_x$, $s_{1,x}\in\mathfrak{m}_x$ or $s_{2,x}\in\mathfrak{m}_x$. Therefore, this show that 
\begin{equation*}
U = X_1\cup X_2.
\end{equation*}
Since $X$ is irreducible, so is $U$, %\later
Without the loss of generality, we assume $U=X_1$. Let $\Spec(A)\subset U$ be an open affine set. Let us define
\begin{equation*}
t= s_1|_{\Spec(A)}\in A.
\end{equation*}
for all $x=\mathfrak{p}\in\Spec(A)\subset U$, we have
\begin{equation*}
t_x\in\mathfrak{m}_x\in\mathcal{O}_{X,x}.
\end{equation*}
In other words,
\begin{equation*}
{\frac t 1}\in\mathfrak{p}A_\mathfrak{p}\subset A_\mathfrak{p}.
\end{equation*}
Therefore, $t\in\mathfrak{p}$ for any prime ideal of $A$, thus $t$ is a nilpotent. Furthermore, $X$ is reduced, thus $t=0$.\\
\par Thus any section $s_1|_{\Spec(A)}=0$ for all $\Spec(A)$. By the sheaf property, we conclude $s_1=0$. 
\end{proof}

\begin{corollary}
If $X$ is integral, then there exists a unique generic point $\eta\in X$.
\end{corollary}

\begin{proof}
%revision needed
For any $\Spec(A)\subseteq X$, $A$ is an integral domain. Let $\eta=(0)\in\Spec(A)$. Then $\eta$ is a generic point of $\Spec(A)$. By the irreducibility of $X$, we have $\eta$ is a generic point of $X$.\\
\par For the uniqueness, assume $\zeta,\eta$ be generic points of $X$. Let us pick an open affine set $\Spec(A)$ containing $\eta$. By closedness of $X\backslash\Spec(A)$ and that $\zeta$ is also a generic point, we conclude that $\zeta\in\Spec(A)$.\\
\par Without the loss of generality, we assume that $\eta=(0)\subset A$. Since $\eta\not=\zeta$, $\zeta=\mathfrak{p}\subset A$ for some prime ideal. However
\begin{equation*}
\eta\in V(\mathfrak{p})\Leftrightarrow\mathfrak{p}=(0)\Rightarrow\eta=\zeta.
\end{equation*}\
\end{proof}


\subsection{Open and Closed Subschemes}

\begin{definition}
Let $(X,\mathcal{O}_X)$ be a scheme and $U\subseteq X$ be open. Then
\begin{equation*}
(U,\mathcal{O}_X|_U)
\end{equation*}
is called an open subscheme of $X$. %Check that this is again a scheme.
\end{definition}

\begin{remark}
If $\Spec(B)\subseteq\Spec(A)$ is an open subscheme then 
\begin{equation*}
\Spec(B)=\bigcup_{i=1}^n \Spec(A_{a_i}) = \bigcup_{i=1}^n \Spec(B_{b_i}),
\end{equation*}
with morphisms $A\ni a_i\mapsto b_i\in B$. %check the proof of the lemma.
\end{remark}

\begin{definition}[1st definition of closed subschemes]
Let $(X,\mathcal{O}_X)$ be a scheme and $M$ be a set of morphisms of schemes such that for each $(i,i^{\#})\in M$, 
\begin{enumerate}
\item $i:Z\to X$, is a homeomorphism of $Z$ and some closed subset $i(Z)$ of $X$.
\item $i^{\#}:\mathcal{O}_X\to i_*\mathcal{O}_Z$ is surjective. In other words, for any $z\in Z$, $\mathcal{O}_{X,i(z)}\to\mathcal{O}_{Z,z}$ is a surjection. 
\end{enumerate}
We now define an equivalence relation $\sim$ such that $(i,i^{\#}):Y\to X\sim(j,j^{\#}):Z\to X$ if $Y$ and $Z$ are homeomorphic and the following diagram is commutative.
\[
\begin{tikzcd}
(Y,\mathcal{O}_Y) \arrow{r}{(i,i^{\#})} \arrow{d} & (X,\mathcal{O}_X)\\
(Z,\mathcal{O}_Z)\arrow{ur}[swap]{(j,j^{\#})} 
\end{tikzcd}
\]
\end{definition}

\begin{definition}[Second definition of closed subschemes]
A closed subscheme of a scheme $(X,\mathcal{O}_X)$ consists of a closed subset $i:Z\hookrightarrow X$ and a sheaf $\mathcal{O}_Z$ such that there is a sheaf of ideals $(Z,\mathcal{I}_Z)$ which is a subsheaf of $\mathcal{O}_X$ such that 
\begin{equation*}
\mathcal{O}_X|_{\mathcal{I}_Z}\cong i_*\mathcal{O}_X.
\end{equation*}
%check the definition of sheaf of ideals.
\end{definition}

\begin{lemma}
Let $X=\Spec(A)$ for a commutative ring and consider a scheme $(X,\mathcal{O}_X)$. Consider a closed subscheme $(Z,\mathcal{O}_Z)$ of $(X,\mathcal{O}_X)$ and an ideal
\begin{equation*}
\mathfrak{a}_Z = \Ker(A\to Z).
\end{equation*}
Then we have the inclusions of set, 
\begin{equation*}
Z\subseteq V(\mathfrak{a}_Z)\subseteq \Spec (A).
\end{equation*}
\end{lemma}

\begin{lemma}
The second claim of the preceding lemma.
\end{lemma}

\begin{lemma}
Let $A$ be a ring then there exists a natural bijection between 
\begin{equation*}
\{\mathfrak{a}\subseteq A\:|\:\mathfrak{a}\text{ is an ideal of A}\}\leftrightarrow\{Z\subseteq\Spec(A)\:|\:Z \text{ is a closed subscheme}\}.
\end{equation*}
\end{lemma}

\begin{proof}
%later
\end{proof}

\subsection{Fiber Products}

\begin{definition}
Let $X,S$ be schemes. $X$ is called a $S$-scheme if there exists a morphism of schemes $\varphi:X\to S$. 
\end{definition}

\begin{definition}
Let $S$ be a scheme. The category of $S$-schemes is $(\mathbf{Sch}/S)$ where
\begin{enumerate}
\item $\mathbf{ob}(\mathbf{Sch}/S) = \{\varphi:X\to S\:|\: \varphi$ is a morphism of schemes$\}$.
\item $(\mathbf{Sch}/S)(\varphi:X\to S,\psi:Y\to S) = \{f:X\to Y\:|\: f$ is a morphism of schemes such that $\varphi=f\circ\psi\}$. 
\end{enumerate}
\end{definition}

\begin{remark}
Clearly we have
\begin{equation*}
(\mathbf{Sch}/\Spec(\mathbb{Z}))=(\mathbf{Sch}).
\end{equation*}
For a field $k$ we have,
\begin{equation*}
%later
\end{equation*}
A given scheme can have many $k$-scheme structure.%later.
\end{remark}

\begin{definition}
A fiber product of $S$-schemes $X,Y$ with morphisms $f:X\to S,g:Y\to S$ is a scheme $X\fib{S}Y$ together with a morphisms $p:X\fib{S}Y\to X,q:X\fib{S}Y\to Y$ such that
\begin{equation*}
f\circ p = g\circ q
\end{equation*}
and for any scheme $F$ with such pair of morphisms $p_F:F\to X,q_F:F\to Y$, there is a morphisms of scheme $\varphi:F\to X\fib{S}Y$ such that we have
\begin{equation*}
p\circ\varphi=p_F,\quad q\circ\varphi = q_F.
\end{equation*}
\[
\begin{tikzcd}
F \arrow[rrd, "q_F"] \arrow[rdd, "p_F"'] \arrow[rd, "\exists !\varphi" description, dotted] &                                           &                  \\
                                                                                     & X\fib{S} Y \arrow[d, "p"] \arrow[r, "q"'] & Y \arrow[d, "g"] \\
                                                                                     & X \arrow[r, "f"']                         & S               
\end{tikzcd}
\]
\end{definition}

\begin{proposition}
A fiber product of $S$-schemes $X,Y$ is unique up to isomorphisms if it exists.
\end{proposition}
\begin{proof}
%later
\end{proof}
\begin{proposition}
Let $X,Y$ be $S$-schemes. Then we have an isomorphism
\begin{equation*}
X\fib{S}Y\cong Y\fib{S}X.
\end{equation*}
\end{proposition}
\begin{proof}
%later
\end{proof}
\begin{proposition}
Let $X$ be a $S$-scheme, $Z$ be a $T$-scheme, and $Y$ be both a $S$ and $T$-scheme. Then we have an isomorphism
\begin{equation*}
(X\fib{S}Y)\fib{T}Z \cong X\fib{S}(Y\fib{T}Z).
\end{equation*}
\end{proposition}
\begin{proof}
\end{proof}
\begin{example}
Let $X,Y,S\in \mathbf{ob}(\mathbf{Sch})$ and $f:X\to S, g:Y\to S$ be mappings. Define
\begin{equation*}
X\fib{S}Y = \{(x,y)\in X\times Y\:|\: f(x) = g(y)\}.
\end{equation*}
Then this is a fiber product together with restriction of projections from $X\times Y\to X,Y$ to $X\fib{S} Y$, denoted by $p,q$. 
%later check the universality.
\end{example}

\begin{example}
There does not exist a fiber product for $\mathbb{A}_k^1,\mathbb{A}_k^1,\Spec(k)$. %Proof later
\end{example}

\begin{lemma}
Fiber products exist in $(\mathbf{AffSch})$. 
\label{fiber_product_affine_scheme}
\end{lemma}
\begin{proof}
%later
\end{proof}

\begin{corollary}
Let $k$ be a field and $m,n\in\mathbb{N}$ then we have
\begin{equation*}
\mathbb{A}^m_k\times \mathbb{A}^m_k \cong\mathbb{A}^{m+n}_k.
\end{equation*}
\end{corollary}

\begin{proof}
%later
\end{proof}

\begin{remark}
For a scheme $X$, write $|X|$ be its underling topological space. Then as topological spaces we have
\begin{equation*}
|\mathbb{A}^1_k|\times| \mathbb{A}^1_k|\not\cong|\mathbb{A}^{2}_k|.
\end{equation*}
Since %later.
\end{remark}

\begin{lemma}
Let $X,Y$ be $S$-schemes and assume the fiber product $X\fib{S}Y$ exists with projections $p:X\fib{S}Y\to X$ and $q:X\fib{S}Y\to Y$. Then for open sets $U\subseteq X, V\subseteq Y$, we have
\begin{equation*}
p^{-1}(U)\cong U\fib{S}Y,\quad q^{-1}(V)\cong X\fib{S}V.
\end{equation*}
\end{lemma}
\begin{proof}
%later
\end{proof}

\begin{lemma}
Let $X,Y$ be $S$-schemes and $X=\bigcup_{i\in I}U_i$ be an open covering of $X$. If for each $i$, the fiber product $U_i\fib{S}Y$ exists, then the fiber product $X\fib{S}Y$ exists.
\label{sheaf_property_fiber_product}
\end{lemma}

\begin{proof}
%later
\end{proof}

\begin{corollary}
Let $X,Y$ be $S$-schemes and assume $Y,S$ are affine. Then $X\fib{S}Y$ exists.
\end{corollary}

\begin{proof}
Let $X=\bigcup_{i\in I}U_i$ be an open covering such that for each $i\in I$, $\Gamma(U_i,\mathcal{O}_X)$ is affine. Then by Lemma \ref{fiber_product_affine_scheme}, fiber products $\{U_i\fib{S}Y\}_{i\in I}$ exist. By Lemma \ref{sheaf_property_fiber_product}, we conclude the fiber product $X\fib{S}Y$ exists.
\end{proof}

\begin{corollary}
Let $X,Y$ be $S$-schemes and assume $X,S$ are affine. Then $X\fib{S}Y$ exists.
\label{right_locally_affine_fiber_product}
\end{corollary}

\begin{corollary}
Let $X,Y$ be $S$-schemes and assume $S$ is affine. Then $X\fib{S}Y$ exists.
\end{corollary}

\begin{proof}
Let $X=\bigcup_{i\in I}U_i$ be an open covering such that for each $i\in I$, $\Gamma(U_i,\mathcal{O}_X)$ is affine. They by Corollary \ref{right_locally_affine_fiber_product}, fiber products $\{U_i\fib{S}Y\}_{i\in I}$ exist. By Lemma \ref{sheaf_property_fiber_product}, $X\fib{S}Y$ exists. 
\end{proof}

\begin{proposition}
Fiber products exist in $(\mathbf{Sch})$. 
\end{proposition}

\begin{proof}
%later
\end{proof}

\begin{definition}
Let $Y$ be a topological group and $(Y,\mathcal{O}_Y)$ be a locally ringed space. We denote the residue field of $y$ to be
\begin{equation*}
k(y) = \mathcal{O}_{Y,y}/\mathfrak{m}_y
\end{equation*}
where $\mathfrak{m}_y$ is the maximal ideal of the stalk $\mathcal{O}_{Y,y}$.
\end{definition}

\begin{definition}
Let $f:X\to Y$ be a scheme morphism and $y\in Y$. The fiber of $f$ over $y$ is the scheme $X_y$ defined as
\begin{equation*}
X_y = X\fib{Y}\Spec(k(y)).
\end{equation*}
\[
\begin{tikzcd}
\Spec(k(y))\fib{Y}X \arrow[d] \arrow[r] & X \arrow[d, "f"] \\
\Spec(k(y)) \arrow[r, "i"']             & Y               
\end{tikzcd}
\]
%later check i if it is actually i^\#
\end{definition}

\begin{definition}
Let $|X_y|$ be an underlying topological space of $X_y$. Then we have the homeomorphism between
\begin{equation*}
|X_y|\cong f^{-1}(y)
\end{equation*}
with the topology on $f^{-1}(y)$ is the induced topology. %check the def of induced topology.
\end{definition}

\begin{proof}
%later.
\end{proof}

\begin{definition}
Let $k$ be a field. We define a category $(\mathbf{Sch}/k)$ such that its object consists of morphisms of schemes $f:X\to\Spec(k)$ and morphisms between two objects $\varphi:X\to\Spec(k)$ and $\psi:Y\to\Spec(k)$ consists of morphisms $f:X\to Y$ such that 
\[
\begin{tikzcd}
X \arrow[d, "\varphi"'] \arrow[r, "f"] & Y \arrow[ld, "\psi"] \\
\Spec(k)                               &                  
\end{tikzcd}
\]
is a commutative diagram.
\end{definition}

\begin{proposition}
Let $K/k$ be an extension of fields. Then we have a morphism such that 
\begin{equation*}
(\mathbf{Sch}/k)\ni [f:X\to\Spec(k)]\mapsto [X\fib{k}K\to\Spec(K)]\in(\mathbf{Sch}/K).
\end{equation*}
\label{base_change_field_extension}
\end{proposition}

\begin{definition}
Let $K/k$ be an extension of fields. Let $X$ be a $\Spec(k)$ scheme then the base change $X_K$ of $X$ to $K$ is 
\begin{equation*}
X_K = X\fib{k}K.
\end{equation*} 
\end{definition}

\begin{proposition}
Let $K/k$ be an extension of fields. Let $X,Y$ be $\Spec(k)$ scheme. A morphism $f:X\to Y$ between two objects $\varphi:X\to\Spec(k),\psi:Y\to\Spec(k)$ of $(\mathbf{Sch}/k)$, there is a unique morphism $f_K:X_K\to Y_K$ such that it is a morphism between $X_K$ and $Y_K$ in $(\mathbf{Sch}/K)$.
\end{proposition}

\begin{definition}
Let $K/k$ be a field extension and $X$ be a $\Spec(k)-scheme$. Then we define the set of $K$-rational points of $X$ by 
\begin{equation*}
X(K) = %later
\end{equation*}
\end{definition}

\begin{remark}
There is one to one correspondence between
\begin{equation*}
X(K)\leftrightarrow X_K(K).
\end{equation*}
%later
\end{remark}

\begin{definition}
Let $f:X\to Y$ be a morphism of schemes and $y\in Y$. Consider the residue field $k(y)$ and its algebraic closure $\overline{k(y)}$. \\
\par The geometric fiber over $y$ is 
\begin{equation*}
X_{\overline{y}} = \Spec(\overline{k(y)})\fib{\Spec(k(y))}X_y.
\end{equation*}
\end{definition}

\begin{proposition}
We have the isomorphism,
\begin{equation*}
X_{\overline{y}} \cong\Spec(\overline{k(y)})\fib{Y}X.
\end{equation*}
\label{isomorphism_geometric_fiber}
\end{proposition}

\begin{proof}
%later
\end{proof}

\begin{example}
\[
\begin{tikzcd}
\mathbb{A}_{\overline{\mathbb{Q}}}^1 \arrow[d] \arrow[r] & \mathbb{A}_{\mathbb{Q}}^1 \arrow[d] \\
\Spec(\overline{\mathbb{Q}}) \arrow[r]                   & \Spec(\mathbb{Q})=\{y\}                  
\end{tikzcd}
\]
where
\begin{equation*}
\mathbb{A}^1_{\mathbb{Q}} = \{(f)\:|\: f \in \mathbb{Q}[x]\text{ is irreducible}\}\cup\{(0)\}
\end{equation*}
and
\begin{equation*}
\mathbb{A}^1_{\overline{\mathbb{Q}}} = \{(x-\lambda)\:|\: \lambda \in \mathbb{Q}\}\cup\{(0)\}.
\end{equation*}
%later
\end{example}

\begin{example}
Consider $X\to Y = \Spec(\mathbb{Z}_{(p)})$. Notice that $Y = \{\eta,t\}$ where $\eta=(0)$ a generic point and $t=$%later.
We have 
\begin{equation*}
X_\eta \cong\Spec(\mathbb{Q}),\quad X_t\cong\Spec(\mathbb{F}_p).
\end{equation*}
And geometric fibers
\begin{equation*}
X_{\overline{\eta}} \cong\Spec(\overline{\mathbb{Q}}),\quad X_{\overline{t}}\cong\Spec(\overline{\mathbb{F}_p}).
\end{equation*}
%later
\end{example}

\begin{example}
There is a bijection between $\mathbb{A}^n_k(\overline{k})$ and $\overline{k}^n$ by
\begin{equation*}
(x_1-\lambda_1,\cdots,x_n-\lambda_n) \leftrightarrow (\lambda_1,\cdots,\lambda_n).
\end{equation*}
%later
\end{example}

\begin{remark}
The base change does not preserve the topology in general.
\[
\begin{tikzcd}
X_K \arrow[d] \arrow[r] & X \arrow[d] \\
\Spec(K) \arrow[r]      & \Spec(k)   
\end{tikzcd}
\]
And $X$ is connected does not imply $X_K$ being connected.
%later
Indeed, we have a counter example that
\begin{equation*}
X = \Spec(\mathbb{C}),\quad k =\mathbb{R}, \quad K=\mathbb{C}.
\end{equation*}
By Proposition \ref{isomorphism_geometric_fiber} we have
\begin{equation*}
X_K = \Spec(\mathbb{C})\fib{\Spec(\mathbb{R})}\Spec(\mathbb{C}).
\end{equation*}
We observe that 
\begin{equation*}
|X_K| = \{(x-i),(x+i)\}
\end{equation*}
which is disconnected however,
\begin{equation*}
|X| = \{(0)\}
\end{equation*}
which is connected.
\end{remark}

\begin{proposition}
Let $K/k$ be a field extension where both $k,K$ are algebraically closed. Then the topology on $X_K$ coincides with the topology on $X$.%later
\end{proposition}
\begin{proof}
\end{proof}

\begin{example}
\[
\begin{tikzcd}
X_{\overline{\mathbb{Q}}} \arrow[r] \arrow[d] & X=\Spec(\overline{\mathbb{Q}}) \arrow[d] &                                                            \\
\Spec(\overline{\mathbb{Q}}) \arrow[r]        & \Spec(\mathbb{Q})                        &                                                            \\
                                              &                                          & \Spec(\overline{\mathbb{Q}}) \arrow[luu] \arrow[llu, "id"]
\end{tikzcd}
\]
Then $X_{\overline{\mathbb{Q}}}=X(\overline{\mathbb{Q}})=\Gal(\overline{\mathbb{Q}}/\mathbb{Q})$.
\end{example}

\begin{definition}[Conjugate of $k$-schemes]
Given a $k$-scheme $X\to\Spec(k)$, and $\sigma\in\Aut(k)$. A conjugate $k$-scheme is defined as the fiber product.
\[
\begin{tikzcd}
X^\sigma \arrow[r] \arrow[d]  & X \arrow[d] \\
\Spec(k) \arrow[r, "\sigma"'] & \Spec(k)   
\end{tikzcd}
\]
%Check the notes of this part from others
We call the morphism $X^\sigma\to\Spec(k)$ the $k$-scheme structure of $X^\sigma$.
\end{definition}

\begin{remark}
As schemes we have $X^\sigma\cong X$, but typically not as $k$-schemes. We could have taken another isomorphism of schemes
\[
\begin{tikzcd}
X^\sigma \arrow[rd] \arrow[r, "\varphi"] & X \arrow[d] \\
                                         & \Spec(k)   
\end{tikzcd}
\]
%Revise what he meant by this
\end{remark}

\begin{example}
Let $X=\Spec(\mathbb{R})$ and consider $\Spec(X\to\mathbbb{Q}(\sqrt{2}))$ and $\sigma:\mathbb{Q}(\sqrt{2})\to\mathbb{Q}(-\sqrt{2})$. Such that $\sigma(\sqrt{2})=-\sqrt{2}$. 
\end{example}

\begin{proposition}
Let $f:\Spec(B)\to\Spec(A)$ be a morphism of affine schemes corresponding to a ring homomorphism $\varphi:A\to B$. For $s\in A$ and $t=\varphi(s)\in B$ we have
\begin{equation*}
f^{-1}(\Spec(A_s)) = \Spec(B_t).
\end{equation*}
\end{proposition}

\begin{proposition}
Suppose $\Spec(A),\Spec(B)\subseteq X$ be schemes which are open affine. Then the intersection $\Spec(A)\cap\Spec(B)$ can be covered by open affine sets $U\subseteq\Spec(A)\cap\Spec(B)$ of the form
\begin{equation*}
U = D(s)=\Spec(A_s)
\end{equation*}
for some element $s\in A$ and 
\begin{equation*}
U = D(t)=\Spec(B_t)
\end{equation*}
for some element $t\in B$.
\end{proposition}

\begin{proposition}
Suppose we have a morphism $f:X\to Y$ of schemes where 
\begin{equation*}
X = \bigcup_{i\in I} \Spec(B_i),\quad Y = \Spec(A).
\end{equation*}
Given homomorphisms of rings $\varphi_i:A\to B_i, \varphi(s) = t_i$ for some fixed $s\in A$. We have
\begin{equation*}
f^{-1}(\Spec(A_s)) = \Spec((B_i)_{t_i}).
\end{equation*}
\end{proposition}

\begin{proposition}
Suppose we have a ring homomorphism $\varphi:A\to B$ and $\{b_i\}_{i\in I}\subset B$ be such that
\begin{equation*}
(b_1,\cdots,b_i,\cdots)_{i\in I} = (1) =  B.
\end{equation*}
If each $B_{b_i}$ is of finite type over $A$ for all $i\in I$, then $B$ is also of finite type over $A$.
\end{proposition}

\begin{proposition}
Given a ring homomorphism $\varphi:A\to B$ and $\{s_i\}_{i\in I}\subseteq A$ such that
\begin{equation*}
(a_i)_{i\in I} = (1) = A.
\end{equation*}
Denote $\{t_i = \varphi(s_i)\}_{i\in I}$. If for each $B_{t_i}$ is of finite type over $A_{s_i}$ then $B$ is of finite type over $A$.
\end{proposition}

\begin{proposition}
Let $X$ be a scheme and denote its global section by $A=\Gamma(X,\mathcal{O}_X)$. Then $X$ is affine (ie. $X=\Spec9A$) if and only if there exists finitely many $a_1,\cdots,a_n\in A$ such that
\begin{enumerate}
\item $(a_1,\cdots,a_n) = (1)=A$,
\item $X_{a_i} = \{x\in X\:|\: (a_i)_x\in\mathcal{O}^*_{X,x}\}$ is affine.
\end{enumerate}
\end{proposition}

\begin{proposition}
Let $f:X\to Y$ be a morphism of schemes. Then $f$ is locally of finite type if and only if for any open affine set $V=\Spec(A)\subseteq Y$ and an open affine subset $U=\Spec(B)$ of $f^{-1}(V)$, $B$ is of finite type over $A$.
\end{proposition}

\begin{proposition}
Let $f:X\to Y$ be a morphism of scheme. $f$ is locally of finite type if and only if for any open affine set $V=\Spec(A)\subseteq Y$, and for any open affine subset $U=\Spec(B)\subseteq f^{-1}(V)$, $B$ is of finite type over $A$.
\end{proposition}

\begin{proposition}
Let $f:X\to Y$ be a morphism of schemes. Then $f$ is affine if and only if for any open set $V=\Spec(A)\subseteq Y$, $f^{-1}(V)$ is affine.
\end{proposition}

\begin{corollary}
If a morphism of schemes $f:X\to\Spec(A)$ is affine then $X$ is affine.
\end{corollary}

\begin{corollary}
A morphism of scheme $f$ is finite if and only if for any open set $V=\Spec(A)\subseteq Y$, and for all $f^{-1}(\Spec(B))$, $B$ is finite over $A$.%later.
\end{corollary}

\begin{lemma}
Let $f:X\to Y$ be a morphism of affine schemes where $X= \Spec(B),Y = \Spec(A)$. Then if $f$ is finite then $f$ is closed and quasi-finite.
\end{lemma}

\begin{proposition}
Let $f:X\to Y$ be a morphism of schemes. If $f$ is finite then $f$ is closed and quasi-fintie.
\end{proposition}

\subsection{Separated and Proper Morphisms}

\begin{proposition}
Any morphism of affine schemes is separated. 
\end{proposition}

\begin{proposition}
Any affine morphism is separated.
\end{proposition}

\begin{proposition}
Any open or closed immersions are separated.
\end{proposition}

\begin{lemma}
Let $f:X\to Y$ be a morphism of schemes, then we have
\begin{equation*}
f\text{ is separated.}\Leftrightarrow \Delta(X)\subseteq X\fib{Y}X.
\end{equation*}
\end{lemma}

\begin{lemma}
Let $Z$ be a topological space. $Z$ is Hausdorff if and only if $\Delta(Z)=\{(z,z)\:|\: z\in Z\}\subseteq Z\times Z$ is closed.
\end{lemma}

\begin{proposition}
A morphism $f:X\to Y$ of schemes is separated if and only if $\Delta(X)\subseteq X\fib{Y}X$ is closed.
\end{proposition}

\begin{remark}
The Zariski topology on $X\fib{Y}X$ is not the product topology.
\end{remark}


\begin{definition}[Universally closed]
A morphism of scheme $f:X\to Y$ is said to be universally closed if,%later
\end{definition}

\begin{definition}
A morphism $f:X\to Y$ of scheme such that 
\begin{enumerate}
\item $f$ is separated,
\item $f$ is of finite type,
\item $f$ is universally closed,
\end{enumerate}
is said to be proper.
\end{definition}

\begin{example}
A morphism $\mathbb{A}_k^1\to\Spec(k)$ is closed but not universally closed. thus not a proper morphism.
\end{example}

\begin{remark}
A morphism $\mathbb{P}_k^1\to\Spec(k)$ is proper (in fact this is projective.)
\end{remark}

\begin{proposition}
Every finite morphisms of scheme is proper.
\end{proposition}

\begin{example}
A morphism of scheme begin 
\begin{enumerate}
\item quasi-finite,
\item separated,
\item finite-type,
\item surjective
\end{enumerate}
does not imply that it is proper.
\end{example}

\begin{proposition}[Nagata compactification]
If a morphism $f:X\to Y$ of schemes is separated and finite type between Noetherian schemes, then there exists a scheme $Z$ and morphisms $h:X\to Z,g:Z\to Y$ of schemes such that 
\begin{equation*}
f = g\circ h
\end{equation*}
with $h$ is an open immersion, $g$ is proper.
\end{proposition}

\begin{proposition}
Let $f:X\to Y$ be a morphism of schemes. Then we have
\begin{equation*}
f\text{ is finite.}\Leftrightarrow f \text{ is quasi-finite and proper.}
\end{equation*}
\end{proposition}

\subsection{Magic Squares}

\begin{definition}
Given morphisms of schemes
\[
\begin{tikzcd}
X_1 \arrow[rd, "f_1"]  &                  &   \\
                       & Y \arrow[r, "g"] & Z \\
X_2 \arrow[ru, "f_2"'] &                  &  
\end{tikzcd}
\]
We define a magic square of it to be
%later
\[
\begin{tikzcd}
X_1\fib{Y}X_2 \arrow[d] \arrow[r] & Y \arrow[d, "\Delta_{Y/Z}"] \\
X_1\fib{Z}X_2 \arrow[r]           & Y\fib{Z}Y                  
\end{tikzcd}
\]
which is a fiber product.
\end{definition}

\begin{proposition}
Given morphisms of schems
\[
\begin{tikzcd}
X \arrow[r, "f"] & Y \arrow[r, "g"] & Z
\end{tikzcd}
\]
We have
\begin{enumerate}
\item $f,g$ are both separated $\Rightarrow $ $g\circ f$ is separated.
\item $f,g$ are both proper $\Rightarrow, g\circ f$ is proper.
\end{enumerate}
\end{proposition}

\begin{corollary}
Given morphisms of schemes
\[
\begin{tikzcd}
X_1 \arrow[rd, "f_1"]  &                  &   \\
                       & Y \arrow[r, "g"] & Z \\
X_2 \arrow[ru, "f_2"'] &                  &  
\end{tikzcd}
\]
where $g$ is separated. We have the graph
\begin{equation*}
\Gamma_f:X\to X\fib{Z}Y
\end{equation*}
is a closed immersion.
\end{corollary}

\begin{corollary}
Given morphisms of schemes
\[
\begin{tikzcd}
X_1 \arrow[rd, "f_1"]  &                  &   \\
                       & Y \arrow[r, "g"] & Z \\
X_2 \arrow[ru, "f_2"'] &                  &  
\end{tikzcd}
\]
where $g$ is separated. Then we have, for the magic square
\[
\begin{tikzcd}
X_1\fib{Y}X_2 \arrow[d, "\psi"] \arrow[r] & Y \arrow[d, "\Delta_{Y/Z}"] \\
X_1\fib{Z}X_2 \arrow[r]           & Y\fib{Z}Y                  
\end{tikzcd}
\]
$\Delta$ is a closed immersion. Hence $\psi$ is also a closed immersion.
\end{corollary}

\end{document}